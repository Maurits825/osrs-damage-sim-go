"use strict";(self.webpackChunkosrs_damage_sim=self.webpackChunkosrs_damage_sim||[]).push([[987],{1987:($e,d,o)=>{o.r(d),o.d(d,{SimpleDmgSimModule:()=>Ee});var p=o(177),S=o(8185),e=o(4438),G=o(4805),C=o(2864),x=o(3858),T=o(4412),g=o(6354),j=o(6110);let c=(()=>{class n{constructor(t){this.jsonParseService=t,this.inputSetup$=new T.t({globalSettings:C.C,gearPresets:[],inputGearSetups:[{gearSetupSettings:null,mainGearSimSetup:{gearPresetIndex:0,conditions:[]},gearSimSetups:[]}]})}inputGearSetupsWatch(){return this.inputSetup$.pipe((0,g.T)(t=>t.inputGearSetups))}gearSetupPresetsWatch(){return this.inputSetup$.pipe((0,g.T)(t=>t.gearPresets))}globalSettingsWatch(){return this.inputSetup$.pipe((0,g.T)(t=>t.globalSettings))}loadInputSetup(t){this.inputSetup$.next(t)}getInputGearSetupFromJson(t){const s=t.gearPresets.map(i=>this.jsonParseService.parseGearSetup(i));return{globalSettings:this.jsonParseService.parseGlobalSettings(t.globalSettings),gearPresets:s,inputGearSetups:t.inputGearSetups.map(i=>({gearSetupSettings:this.jsonParseService.parseGearSetupSettings(i.gearSetupSettings),mainGearSimSetup:i.mainGearSimSetup,gearSimSetups:i.gearSimSetups}))}}getInputSetupAsJson(){return JSON.stringify(this.inputSetup$.getValue(),this.replacerWithPath((t,s,i)=>s instanceof Set?[...s]:x.g.some(a=>a.test(i))?void 0:s))}replacerWithPath(t){const s=new Map;return function(i,a){const l=s.get(this)+(Array.isArray(this)?`[${i}]`:"."+i);return a===Object(a)&&s.set(a,l),t.call(this,i,a,l.replace(/undefined\.\.?/,""))}}static{this.\u0275fac=function(s){return new(s||n)(e.KVO(j.n))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var I=o(6868),k=o(2908),F=o(2401),_=o(4167),R=o(6397);let y=(()=>{class n{constructor(t){this.inputService=t,this.npcInfo={npc:null,raidLevel:0,pathLevel:0,overlyDraining:!1,isChallengeMode:!1}}ngOnInit(){this.inputService.globalSettingsWatch().subscribe(t=>{this.globalSettings=t,this.npcInfo=(0,_.J)(this.globalSettings)})}npcInfoChanged(t){this.npcInfo=t,this.globalSettings=(0,F.A)(this.globalSettings,(0,_.T)(t))}static{this.\u0275fac=function(s){return new(s||n)(e.rXU(c))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-simple-sim-settings"]],decls:15,vars:1,consts:[[1,"mb-4"],[1,"row","mb-1","align-items-center"],[1,"col-2"],[1,"col-10","col-xxl-6",3,"npcInfoChanged","npcInfo"],[1,"row","mb-4","align-items-center"],[1,"col","col-sm-3"],[1,"row","align-items-center"],[1,"col-auto","pe-0"],["for","teamSize"],[1,"col"],["id","teamSize","type","number","min","1","max","100",1,"form-control"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.EFF(3,"Npc Settings"),e.k0s(),e.j41(4,"app-npc-input",3),e.bIt("npcInfoChanged",function(l){return i.npcInfoChanged(l)}),e.k0s()()(),e.j41(5,"div",4)(6,"div",2),e.EFF(7,"General Settings"),e.k0s(),e.j41(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),e.EFF(12,"Something"),e.k0s()(),e.j41(13,"div",9),e.nrm(14,"input",10),e.k0s()()()()),2&s&&(e.R7$(4),e.Y8G("npcInfo",i.npcInfo))},dependencies:[R.V],encapsulation:2})}}return n})();var u=o(7298),E=o(2955);const $={AND:"and",OR:"or"},N={EQUAL:"==",GRT_THAN:">",LESS_THAN:"<",GRT_EQ_THAN:">=",LESS_EQ_THAN:"<="},P={NPC_HITPOINTS:"Npc hitpoints",DMG_DEALT:"Damage dealt",ATTACK_COUNT:"Attack count"};var m=o(9417),b=o(396);function D(n,r){if(1&n&&(e.j41(0,"ng-option",15),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.key),e.R7$(),e.SpI(" ",t.value," ")}}function V(n,r){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"ng-select",9),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG().$implicit;return e.DH7(a.nextComparison,i)||(a.nextComparison=i),e.Njj(i)}),e.DNE(2,D,2,2,"ng-option",10),e.nI1(3,"keyvalue"),e.k0s(),e.bVm()}if(2&n){const t=e.XpG().$implicit,s=e.XpG();e.R7$(),e.R50("ngModel",t.nextComparison),e.Y8G("clearable",!1),e.R7$(),e.Y8G("ngForOf",e.bMT(3,3,s.booleanOperators))}}function Y(n,r){if(1&n&&(e.j41(0,"ng-option",15),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.key),e.R7$(),e.SpI(" ",t.value," ")}}function X(n,r){if(1&n&&(e.j41(0,"ng-option",15),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.key),e.R7$(),e.SpI(" ",t.value," ")}}function B(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",5)(1,"div",6),e.DNE(2,V,4,5,"ng-container",7),e.k0s(),e.j41(3,"div",8)(4,"ng-select",9),e.mxI("ngModelChange",function(i){const a=e.eBV(t).$implicit;return e.DH7(a.variable,i)||(a.variable=i),e.Njj(i)}),e.DNE(5,Y,2,2,"ng-option",10),e.nI1(6,"keyvalue"),e.k0s()(),e.j41(7,"div",11)(8,"ng-select",9),e.mxI("ngModelChange",function(i){const a=e.eBV(t).$implicit;return e.DH7(a.comparison,i)||(a.comparison=i),e.Njj(i)}),e.DNE(9,X,2,2,"ng-option",10),e.nI1(10,"keyvalue"),e.k0s()(),e.j41(11,"div",11)(12,"input",12),e.mxI("ngModelChange",function(i){const a=e.eBV(t).$implicit;return e.DH7(a.value,i)||(a.value=i),e.Njj(i)}),e.k0s()(),e.j41(13,"div",13)(14,"button",14),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.removeCondition(i))}),e.EFF(15,"X"),e.k0s()()()}if(2&n){const t=r.$implicit,s=r.first,i=e.XpG();e.R7$(2),e.Y8G("ngIf",!s),e.R7$(2),e.R50("ngModel",t.variable),e.Y8G("clearable",!1),e.R7$(),e.Y8G("ngForOf",e.bMT(6,8,i.conditionVariables)),e.R7$(3),e.R50("ngModel",t.comparison),e.Y8G("clearable",!1),e.R7$(),e.Y8G("ngForOf",e.bMT(10,10,i.comparisonOperators)),e.R7$(3),e.R50("ngModel",t.value)}}let M=(()=>{class n{constructor(){this.conditions=[],this.booleanOperators=$,this.comparisonOperators=N,this.conditionVariables=P,this.conditionsChanged=new e.bkB,this.maxConditions=5}addCondition(){this.conditions.push({variable:"NPC_HITPOINTS",comparison:"EQUAL",value:0,nextComparison:"AND"}),this.conditionsChanged.emit(this.conditions)}removeCondition(t){const s=this.conditions.indexOf(t);s>=0&&this.conditions.splice(s,1),this.conditionsChanged.emit(this.conditions)}static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-condition"]],inputs:{conditions:"conditions"},outputs:{conditionsChanged:"conditionsChanged"},decls:6,vars:2,consts:[[1,""],["class","row align-items-center mb-1",4,"ngFor","ngForOf"],[1,"text-end"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"bi","bi-plus"],[1,"row","align-items-center","mb-1"],[1,"col-2","pe-0"],[4,"ngIf"],[1,"col","px-1"],[3,"ngModelChange","ngModel","clearable"],[3,"value",4,"ngFor","ngForOf"],[1,"col-2","px-1"],["type","number","placeholder","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-auto","ps-1"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[3,"value"]],template:function(s,i){1&s&&(e.j41(0,"div",0),e.DNE(1,B,16,12,"div",1),e.j41(2,"div",2)(3,"button",3),e.bIt("click",function(){return i.addCondition()}),e.nrm(4,"i",4),e.EFF(5," Add condition "),e.k0s()()()),2&s&&(e.R7$(),e.Y8G("ngForOf",i.conditions),e.R7$(2),e.Y8G("disabled",i.conditions.length>=i.maxConditions))},dependencies:[p.Sq,p.bT,m.me,m.Q0,m.BC,m.vS,b.vr,b.xt,p.lG],encapsulation:2})}}return n})();var f=o(9797);function O(n,r){if(1&n&&(e.j41(0,"div",7),e.nrm(1,"img",8),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Mz_("src","data:image/png;base64,",null==t.gearSetup.gear[3]?null:t.gearSetup.gear[3].icon,"",e.B4B)}}function A(n,r){if(1&n&&(e.qex(0),e.j41(1,"div"),e.nrm(2,"img",8),e.EFF(3),e.k0s(),e.bVm()),2&n){const t=e.XpG();e.R7$(2),e.Mz_("src","assets/img/magic_spells/",t.gearSetup.spell,".png",e.B4B),e.R7$(),e.SpI(" ",t.gearSetup.spell,"")}}function U(n,r){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",null==t.gearSetup.attackStyle?null:t.gearSetup.attackStyle.split(" ")[0]," ")}}function w(n,r){1&n&&(e.j41(0,"div",9),e.nrm(1,"img",10),e.k0s())}function L(n,r){if(1&n&&(e.j41(0,"div",11),e.nrm(1,"img",8),e.k0s()),2&n){const t=r.$implicit;e.R7$(),e.Mz_("src","assets/img/prayer/",t,".png",e.B4B)}}let h=(()=>{class n{static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-gear-setup-label"]],inputs:{gearSetup:"gearSetup"},decls:11,vars:6,consts:[["noSpell",""],[1,"d-flex","align-items-center","justify-content-center",2,"height","38px"],["class","text-center me-1",4,"ngIf"],[4,"ngIf","ngIfElse"],["class","mx-1",4,"ngIf"],[1,"d-flex","mx-1"],["class","px-1",4,"ngFor","ngForOf"],[1,"text-center","me-1"],[3,"src"],[1,"mx-1"],["src","assets/img/other/special_attack_orb.png"],[1,"px-1"]],template:function(s,i){if(1&s&&(e.j41(0,"div",1),e.DNE(1,O,2,2,"div",2),e.j41(2,"div"),e.EFF(3),e.k0s()(),e.j41(4,"div",1),e.DNE(5,A,4,3,"ng-container",3)(6,U,2,1,"ng-template",null,0,e.C5r)(8,w,2,0,"div",4),e.j41(9,"div",5),e.DNE(10,L,2,2,"div",6),e.k0s()()),2&s){const a=e.sdS(7);e.R7$(),e.Y8G("ngIf",null==i.gearSetup.gear[3]?null:i.gearSetup.gear[3].icon),e.R7$(2),e.SpI(" ",i.gearSetup.setupName," "),e.R7$(2),e.Y8G("ngIf",i.gearSetup.spell)("ngIfElse",a),e.R7$(3),e.Y8G("ngIf",i.gearSetup.isSpecial),e.R7$(2),e.Y8G("ngForOf",i.gearSetup.prayers)}},dependencies:[p.Sq,p.bT],encapsulation:2})}}return n})();function z(n,r){if(1&n&&(e.j41(0,"div",13),e.EFF(1),e.k0s()),2&n){const t=r.item;e.R7$(),e.SpI(" ",t.setupName," ")}}function H(n,r){if(1&n&&(e.j41(0,"div",13),e.EFF(1),e.k0s()),2&n){const t=r.item;e.R7$(),e.SpI(" ",t.setupName," ")}}function W(n,r){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",14)(2,"div",4)(3,"div",5),e.EFF(4,"Select preset:"),e.k0s(),e.j41(5,"div",6)(6,"app-ng-select-lazy-load",7),e.bIt("valueChanged",function(i){const a=e.eBV(t).index,l=e.XpG(2);return e.Njj(l.selectedGearPresetChange(i,a))}),e.DNE(7,H,2,1,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(10,"div",15)(11,"button",16),e.bIt("click",function(){const i=e.eBV(t).index,a=e.XpG(2);return e.Njj(a.removeSimSetup(i))}),e.nrm(12,"i",17),e.k0s()()(),e.j41(13,"div",8)(14,"div",9),e.nrm(15,"app-gear-setup-label",10),e.k0s(),e.j41(16,"div",6),e.nrm(17,"app-condition",18),e.k0s()()(),e.bVm()}if(2&n){const t=r.$implicit,s=r.index,i=e.XpG(2);e.R7$(6),e.Y8G("valueType",i.GearSetup)("allValues",i.allGearPresets)("selectedValue",i.selectedGearPresets[s])("clearable",!1),e.R7$(9),e.Y8G("gearSetup",i.selectedGearPresets[s]),e.R7$(2),e.Y8G("conditions",t.conditions)}}function J(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.addNewSimSetup())}),e.nrm(1,"i",20),e.EFF(2," Add Sim Setup "),e.k0s()}}function Q(n,r){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"h6"),e.EFF(2,"Main Setup"),e.k0s(),e.j41(3,"div",3)(4,"div",4)(5,"div",5),e.EFF(6,"Select preset:"),e.k0s(),e.j41(7,"div",6)(8,"app-ng-select-lazy-load",7),e.bIt("valueChanged",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.selectedMainGearChange(i))}),e.DNE(9,z,2,1,"ng-template",null,1,e.C5r),e.k0s()()(),e.j41(12,"div",8)(13,"div",9),e.nrm(14,"app-gear-setup-label",10),e.k0s()()(),e.j41(15,"h6"),e.EFF(16,"Fill Setups"),e.k0s(),e.DNE(17,W,18,6,"ng-container",11),e.j41(18,"div",8),e.DNE(19,J,3,0,"button",12),e.k0s(),e.bVm()}if(2&n){const t=e.XpG();e.R7$(8),e.Y8G("valueType",t.GearSetup)("allValues",t.allGearPresets)("selectedValue",t.selectedMainGearSetup)("clearable",!1),e.R7$(6),e.Y8G("gearSetup",t.selectedMainGearSetup),e.R7$(3),e.Y8G("ngForOf",t.gearSimSetups),e.R7$(2),e.Y8G("ngIf",t.gearSimSetups.length<t.maxSimSetups)}}function K(n,r){1&n&&(e.j41(0,"p"),e.EFF(1,"Add gear presets to start configuring sim setups"),e.k0s())}let Z=(()=>{class n{constructor(t){this.inputService=t,this.selectedGearPresets=[],this.maxSimSetups=50}ngOnInit(){this.inputService.gearSetupPresetsWatch().subscribe(t=>this.allGearPresets=t),this.gearSimSetups.forEach(t=>this.selectedGearPresets.push(this.allGearPresets[t.gearPresetIndex])),this.selectedMainGearSetup=this.allGearPresets[0]}addNewSimSetup(t){this.gearSimSetups.push((0,u.A)(t)??{gearPresetIndex:0,conditions:[]}),this.selectedGearPresets.push(this.allGearPresets[0])}removeSimSetup(t){this.gearSimSetups.splice(t,1),this.selectedGearPresets.splice(t,1)}selectedGearPresetChange(t,s){this.selectedGearPresets[s]=t,this.gearSimSetups[s].gearPresetIndex=this.allGearPresets.findIndex(i=>i===t)}selectedMainGearChange(t){this.selectedMainGearSetup=t,this.mainGearSimSetup.gearPresetIndex=this.allGearPresets.findIndex(s=>s===t)}static{this.\u0275fac=function(s){return new(s||n)(e.rXU(c))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-gear-sim-setups"]],inputs:{gearSimSetups:"gearSimSetups",mainGearSimSetup:"mainGearSimSetup"},decls:4,vars:2,consts:[["noPresets",""],["dropdownLabel","","dropdownOptions",""],[4,"ngIf","ngIfElse"],[1,"mb-5"],[1,"d-flex","align-items-center","mb-2"],[1,"me-2"],[1,"flex-fill"],["searchProperty","setupName","placeholder","Select preset",3,"valueChanged","valueType","allValues","selectedValue","clearable"],[1,"d-flex"],[1,"me-3"],[3,"gearSetup"],[4,"ngFor","ngForOf"],["type","button","class","btn btn-primary text-center",3,"click",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"mb-4"],[1,"flex-shrink-1","ms-2"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"],[3,"conditions"],["type","button",1,"btn","btn-primary","text-center",3,"click"],[1,"bi","bi-plus"]],template:function(s,i){if(1&s&&(e.j41(0,"div"),e.DNE(1,Q,20,7,"ng-container",2)(2,K,2,0,"ng-template",null,0,e.C5r),e.k0s()),2&s){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf",i.allGearPresets.length>0)("ngIfElse",a)}},dependencies:[p.Sq,p.bT,M,f.N,h],encapsulation:2})}}return n})();const q=n=>({active:n});function ee(n,r){if(1&n){const t=e.RV6();e.j41(0,"li",7)(1,"div",8)(2,"button",9),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.openNewSetupTab(i))}),e.nrm(3,"i",10),e.k0s(),e.j41(4,"div")(5,"button",11),e.bIt("click",function(){const i=e.eBV(t).index,a=e.XpG();return e.Njj(a.deleteTab(i))}),e.nrm(6,"i",12),e.k0s()()(),e.j41(7,"a",13),e.bIt("click",function(){const i=e.eBV(t).index,a=e.XpG();return e.Njj(a.selectTab(i))}),e.j41(8,"div",14),e.EFF(9),e.k0s()()()}if(2&n){const t=r.index,s=e.XpG();e.R7$(2),e.Y8G("disabled",s.inputGearSetups.length>=s.maxSetupTabs),e.R7$(5),e.Y8G("ngClass",e.eq3(3,q,s.activeTab===t)),e.R7$(2),e.SpI("Setup - ",t+1,"")}}function te(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.openNewSetupTab())}),e.nrm(1,"i",16),e.EFF(2," Add setup "),e.k0s()}}function ne(n,r){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",17)(2,"div",18)(3,"div",19)(4,"app-gear-setup-settings",20),e.mxI("gearSetupSettingsChange",function(i){const a=e.eBV(t).$implicit;return e.DH7(a.gearSetupSettings,i)||(a.gearSetupSettings=i),e.Njj(i)}),e.k0s()()(),e.j41(5,"div"),e.nrm(6,"app-gear-sim-setups",21),e.k0s()(),e.bVm()}if(2&n){const t=r.$implicit,s=r.index,i=e.XpG();e.R7$(),e.Y8G("hidden",i.activeTab!==s),e.R7$(3),e.R50("gearSetupSettings",t.gearSetupSettings),e.R7$(2),e.Y8G("gearSimSetups",t.gearSimSetups)("mainGearSimSetup",t.mainGearSimSetup)}}let ie=(()=>{class n{constructor(t,s){this.changeDetector=t,this.inputService=s,this.activeTab=0,this.maxSetupTabs=5}ngOnInit(){this.inputService.inputGearSetupsWatch().subscribe(t=>this.inputGearSetups=t),this.changeDetector.detectChanges()}openNewSetupTab(t){this.inputGearSetups.push(t?(0,u.A)(t):{gearSetupSettings:null,mainGearSimSetup:{gearPresetIndex:0,conditions:[]},gearSimSetups:[]}),this.selectTab(this.inputGearSetups.length-1),this.changeDetector.detectChanges()}selectTab(t){this.activeTab=t}deleteTab(t){this.inputGearSetups.splice(t,1),this.activeTab>=t&&(this.activeTab=Math.max(0,this.activeTab-1))}loadInputSetup(t){this.inputGearSetups=t}static{this.\u0275fac=function(s){return new(s||n)(e.rXU(e.gRc),e.rXU(c))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-gear-setup-tabs"]],decls:8,vars:3,consts:[[1,"navbar","navbar-expand-sm","bg-light","mb-3","rounded"],[1,"container-fluid"],[1,"navbar-nav","nav-tabs","flex-wrap"],["class","nav-item",4,"ngFor","ngForOf"],[1,"me-auto"],["type","button","class","btn btn-primary btn-lg ms-3 my-2",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"nav-item"],[1,"d-flex","align-items-center","justify-content-between","px-3","pb-2"],["type","button",1,"btn","btn-primary","me-2",3,"click","disabled"],[1,"bi","bi-clipboard-plus"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-x"],["role","button",1,"nav-link",3,"click","ngClass"],[1,"text-center","fs-5"],["type","button",1,"btn","btn-primary","btn-lg","ms-3","my-2",3,"click"],[1,"bi","bi-plus"],[3,"hidden"],[1,"row","justify-content-center"],[1,"mb-2","col-12","col-xl-10"],[3,"gearSetupSettingsChange","gearSetupSettings"],[3,"gearSimSetups","mainGearSimSetup"]],template:function(s,i){1&s&&(e.j41(0,"div")(1,"nav",0)(2,"div",1)(3,"ul",2),e.DNE(4,ee,10,5,"li",3),e.j41(5,"div",4),e.DNE(6,te,3,0,"button",5),e.k0s()()()(),e.DNE(7,ne,7,4,"ng-container",6),e.k0s()),2&s&&(e.R7$(4),e.Y8G("ngForOf",i.inputGearSetups),e.R7$(2),e.Y8G("ngIf",i.inputGearSetups.length<i.maxSetupTabs),e.R7$(),e.Y8G("ngForOf",i.inputGearSetups))},dependencies:[p.YU,p.Sq,p.bT,E.x,Z],encapsulation:2})}}return n})();var se=o(2245);const ae=(n,r)=>({"border-primary":n,"border-secondary":r});function re(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",3),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addNewGearPreset())}),e.nrm(1,"i",4),e.EFF(2," Add preset "),e.k0s()}}function oe(n,r){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",5),e.nrm(2,"app-gear-setup-label",6),e.j41(3,"div",7)(4,"div",8)(5,"button",9),e.bIt("click",function(){const i=e.eBV(t).index,a=e.XpG();return e.Njj(a.editGearPreset(i))}),e.nrm(6,"i",10),e.EFF(7," Edit "),e.k0s()(),e.j41(8,"div",11)(9,"button",12),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.addNewGearPreset(i))}),e.nrm(10,"i",13),e.k0s()(),e.j41(11,"div",14)(12,"button",15),e.bIt("click",function(){const i=e.eBV(t).index,a=e.XpG();return e.Njj(a.removeGearPreset(i))}),e.nrm(13,"i",16),e.k0s()()()(),e.bVm()}if(2&n){const t=r.$implicit,s=r.index,i=e.XpG();e.R7$(),e.Y8G("ngClass",e.l_i(3,ae,i.activeIndex===s,i.activeIndex!==s)),e.R7$(),e.Y8G("gearSetup",t),e.R7$(7),e.Y8G("disabled",i.gearPresets.length>=i.maxGearPresets)}}let pe=(()=>{class n{constructor(t){this.inputService=t,this.selectGearSetup=new e.bkB,this.maxGearPresets=50,this.activeIndex=null}ngOnInit(){this.inputService.gearSetupPresetsWatch().subscribe(t=>this.gearPresets=t)}addNewGearPreset(t){this.gearPresets.push((0,u.A)(t)??{...(0,u.A)(se.cU),setupName:"Preset Name"}),this.activeIndex=this.gearPresets.length-1,this.editGearPreset(this.activeIndex)}removeGearPreset(t){this.gearPresets.splice(t,1),this.selectGearSetup.emit(null),this.activeIndex=null}editGearPreset(t){this.activeIndex=t,this.selectGearSetup.emit(this.gearPresets[t])}static{this.\u0275fac=function(s){return new(s||n)(e.rXU(c))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-gear-presets"]],outputs:{selectGearSetup:"selectGearSetup"},decls:6,vars:2,consts:[[1,"mb-2"],["type","button","class","btn btn-primary text-center",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","text-center",3,"click"],[1,"bi","bi-plus"],[1,"mb-2","p-1","border","border-2","rounded",3,"ngClass"],[3,"gearSetup"],[1,"d-flex","align-items-center"],[1,"btn-group","flex-fill"],["type","button",1,"btn","btn-primary","flex-fill",3,"click"],[1,"bi","bi-pencil-fill"],[1,"ms-2"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"bi","bi-clipboard-plus"],[1,"flex-shrink-1","ms-2"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"]],template:function(s,i){1&s&&(e.j41(0,"div")(1,"div",0)(2,"h5"),e.EFF(3,"Gear Presets"),e.k0s(),e.DNE(4,re,3,0,"button",1),e.k0s(),e.DNE(5,oe,14,6,"ng-container",2),e.k0s()),2&s&&(e.R7$(4),e.Y8G("ngIf",i.gearPresets.length<i.maxGearPresets),e.R7$(),e.Y8G("ngForOf",i.gearPresets))},dependencies:[p.YU,p.Sq,p.bT,h],encapsulation:2})}}return n})();var le=o(973);function ce(n,r){if(1&n&&(e.qex(0),e.j41(1,"div"),e.EFF(2),e.nI1(3,"tickToTime"),e.k0s(),e.bVm()),2&n){const t=e.XpG();e.R7$(2),e.SpI("results: ",e.bMT(3,1,t.results.results[0].ticksToKill),"")}}let me=(()=>{class n{static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-simple-sim-results"]],inputs:{results:"results"},decls:1,vars:1,consts:[[4,"ngIf"]],template:function(s,i){1&s&&e.DNE(0,ce,4,3,"ng-container",0),2&s&&e.Y8G("ngIf",(null==i.results?null:i.results.results)&&!(null!=i.results&&i.results.error))},dependencies:[p.bT,le.A],encapsulation:2})}}return n})();var ue=o(6697),ge=o(2411);function de(n,r){1&n&&e.EFF(0),2&n&&e.SpI(" ",r.item.setupName," ")}function Se(n,r){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"app-ng-select-lazy-load",6),e.bIt("valueChanged",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.selectedSetupChange(i))}),e.DNE(2,de,1,1,"ng-template",null,1,e.C5r),e.k0s(),e.bVm()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("valueType",t.ExampleSetup)("allValues",t.exampleSetups)("selectedValue",t.selectedSetup)}}function _e(n,r){1&n&&(e.j41(0,"div",7)(1,"span",8),e.EFF(2,"Loading..."),e.k0s()())}let be=(()=>{class n{constructor(t,s){this.staticDataService=t,this.inputService=s}ngOnInit(){this.staticDataService.SimpleSimExampleSetups$.pipe((0,ue.s)(1)).subscribe(t=>{this.exampleSetups=t})}selectedSetupChange(t){if(!t)return;const s=this.inputService.getInputGearSetupFromJson(t.inputSetup);this.inputService.loadInputSetup(s)}static{this.\u0275fac=function(s){return new(s||n)(e.rXU(ge.a),e.rXU(c))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-example-setups"]],decls:7,vars:2,consts:[["showSpinner",""],["dropdownLabel","","dropdownOptions",""],[1,"d-flex","align-items-center"],[1,"me-3"],[1,"flex-grow-1"],[4,"ngIf","ngIfElse"],["searchProperty","setupName","placeholder","Select example setup",3,"valueChanged","valueType","allValues","selectedValue"],["role","status",1,"spinner-border","ms-1"],[1,"visually-hidden"]],template:function(s,i){if(1&s&&(e.j41(0,"div",2)(1,"div",3),e.EFF(2,"Load example setup"),e.k0s(),e.j41(3,"div",4),e.DNE(4,Se,5,3,"ng-container",5)(5,_e,3,0,"ng-template",null,0,e.C5r),e.k0s()()),2&s){const a=e.sdS(6);e.R7$(4),e.Y8G("ngIf",i.exampleSetups)("ngIfElse",a)}},dependencies:[p.bT,f.N],encapsulation:2})}}return n})();const v=n=>({active:n});function fe(n,r){if(1&n&&(e.qex(0),e.j41(1,"button",27),e.nrm(2,"span",28),e.j41(3,"span",29),e.EFF(4," Loading..."),e.k0s()(),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.loading)}}function he(n,r){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"button",30),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.runSimpleDmgSimCalc())}),e.j41(2,"span",29),e.EFF(3,"Run Damage Simulator"),e.k0s()(),e.bVm()}}function ve(n,r){1&n&&(e.j41(0,"div"),e.EFF(1,"\xa0"),e.k0s())}function Ge(n,r){1&n&&(e.j41(0,"div",33),e.EFF(1," Damage sim done, results above! "),e.k0s())}function Ce(n,r){if(1&n&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.JRh(t.simpleSimResults.error)}}function xe(n,r){if(1&n&&(e.qex(0),e.DNE(1,Ge,2,0,"div",31)(2,Ce,2,1,"div",32),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.simpleSimResults&&!(null!=t.simpleSimResults&&t.simpleSimResults.error)),e.R7$(),e.Y8G("ngIf",null==t.simpleSimResults?null:t.simpleSimResults.error)}}function Te(n,r){if(1&n&&(e.qex(0),e.nrm(1,"app-gear-setup",36),e.bVm()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("gearSetup",t.selectedGearSetup)}}function je(n,r){1&n&&e.EFF(0," Select or add a new setup ")}function Ie(n,r){if(1&n&&(e.j41(0,"div"),e.DNE(1,Te,2,1,"ng-container",35)(2,je,1,0,"ng-template",null,0,e.C5r),e.k0s()),2&n){const t=e.sdS(3),s=e.XpG();e.R7$(),e.Y8G("ngIf",s.selectedGearSetup)("ngIfElse",t)}}function ke(n,r){1&n&&(e.j41(0,"div"),e.nrm(1,"app-gear-setup-tabs"),e.k0s())}const Fe=[{path:"",component:(()=>{class n{constructor(t,s){this.damageSimservice=t,this.inputService=s,this.loading=!1,this.simpleSimResults=null,this.activeTab="gear-setup-tabs",this.selectedGearSetup=null}runSimpleDmgSimCalc(){this.loading=!0,this.simpleSimResults=null;const t=this.inputService.getInputSetupAsJson();this.damageSimservice.runSimpleSim(t).subscribe({next:s=>{this.loading=!1,this.simpleSimResults=s},error:({error:{error:s}})=>{this.loading=!1;const i=s?s[0].toUpperCase()+s.slice(1):"Unkown error";this.simpleSimResults={...this.simpleSimResults,error:i}}})}onSelectGearSetup(t){this.selectedGearSetup=t,this.activeTab="preset-editor"}static{this.\u0275fac=function(s){return new(s||n)(e.rXU(G.i),e.rXU(c))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-simple-dmg-sim"]],decls:41,vars:13,consts:[["emptySetup",""],[1,"container"],[1,"d-flex","align-items-center","justify-content-center","mb-4"],["src","assets/img/menu/dps-detail.png",1,"img-fluid",2,"width","70px"],[1,"ms-2"],[1,"display-1"],[1,"mb-2"],[3,"results"],[1,"row","mb-4"],[1,"d-flex","justify-content-between","mb-5","flex-wrap"],[1,"flex-fill","mb-1"],[1,"flex-grow-1"],[1,"flex-shrink-1","d-flex","ms-1"],[1,"mb-4"],[1,"d-flex","mb-1"],["role","group",1,"flex-fill","btn-group","btn-group-lg"],[4,"ngIf"],[1,"row"],[1,"col-3"],[3,"selectGearSetup"],[1,"col"],[1,"navbar","navbar-expand-sm","bg-light","mb-3","rounded"],[1,"container-fluid","px-2"],[1,"navbar-nav","nav-tabs","flex-wrap"],[1,"nav-item"],["role","button",1,"nav-link",3,"click","ngClass"],[1,"text-center"],["type","button",1,"btn","btn-primary",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"sr-only"],["type","button",1,"btn","btn-primary",3,"click"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-success"],[1,"text-danger"],[4,"ngIf","ngIfElse"],[3,"gearSetup"]],template:function(s,i){1&s&&(e.j41(0,"div",1)(1,"div",2)(2,"div"),e.nrm(3,"img",3),e.k0s(),e.j41(4,"div",4)(5,"h1",5),e.EFF(6,"Simple Damage Sim"),e.k0s()()(),e.j41(7,"div",6),e.nrm(8,"app-simple-sim-results",7),e.k0s(),e.nrm(9,"hr",8),e.j41(10,"div",9)(11,"div",10),e.nrm(12,"app-example-setups"),e.k0s(),e.nrm(13,"div",11)(14,"div",12),e.k0s(),e.nrm(15,"app-simple-sim-settings")(16,"app-shared-settings"),e.j41(17,"div",13)(18,"div",14)(19,"div",15),e.DNE(20,fe,5,1,"ng-container",16)(21,he,4,0,"ng-container",16),e.k0s()(),e.DNE(22,ve,2,0,"div",16)(23,xe,3,2,"ng-container",16),e.k0s(),e.j41(24,"div",17)(25,"div",18)(26,"app-gear-presets",19),e.bIt("selectGearSetup",function(l){return i.onSelectGearSetup(l)}),e.k0s()(),e.j41(27,"div",20)(28,"nav",21)(29,"div",22)(30,"ul",23)(31,"li",24)(32,"a",25),e.bIt("click",function(){return i.activeTab="preset-editor"}),e.j41(33,"div",26),e.EFF(34,"Preset Editor"),e.k0s()()(),e.j41(35,"li",24)(36,"a",25),e.bIt("click",function(){return i.activeTab="gear-setup-tabs"}),e.j41(37,"div",26),e.EFF(38,"Gear Setups"),e.k0s()()()()()(),e.DNE(39,Ie,4,2,"div",16)(40,ke,2,0,"div",16),e.k0s()()()),2&s&&(e.R7$(8),e.Y8G("results",i.simpleSimResults),e.R7$(12),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(9),e.Y8G("ngClass",e.eq3(9,v,"preset-editor"===i.activeTab)),e.R7$(4),e.Y8G("ngClass",e.eq3(11,v,"gear-setup-tabs"===i.activeTab)),e.R7$(3),e.Y8G("ngIf","preset-editor"===i.activeTab),e.R7$(),e.Y8G("ngIf","gear-setup-tabs"===i.activeTab))},dependencies:[p.YU,p.bT,I.C,k.E,y,ie,pe,me,be],encapsulation:2})}}return n})()}];let Re=(()=>{class n{static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[S.iI.forChild(Fe),S.iI]})}}return n})();var ye=o(5241);let Ee=(()=>{class n{static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[p.MD,m.YN,Re,ye.T]})}}return n})()}}]);