"use strict";(self.webpackChunkosrs_damage_sim=self.webpackChunkosrs_damage_sim||[]).push([[816],{9816:(Qe,d,p)=>{p.r(d),p.d(d,{SimpleDmgSimModule:()=>Pe});var l=p(6895),_=p(2185),e=p(4650),h=p(2386),C=p(5983),T=p(6818),Z=p(1135),g=p(4004),G=p(653);let c=(()=>{class n{constructor(t){this.jsonParseService=t,this.inputSetup$=new Z.X({globalSettings:C.o,gearPresets:[],inputGearSetups:[{gearSetupSettings:null,mainGearSimSetup:{gearPresetIndex:0,conditions:[]},gearSimSetups:[]}]})}inputGearSetupsWatch(){return this.inputSetup$.pipe((0,g.U)(t=>t.inputGearSetups))}gearSetupPresetsWatch(){return this.inputSetup$.pipe((0,g.U)(t=>t.gearPresets))}globalSettingsWatch(){return this.inputSetup$.pipe((0,g.U)(t=>t.globalSettings))}loadInputSetup(t){this.inputSetup$.next(t)}getInputGearSetupFromJson(t){const i=t.gearPresets.map(o=>this.jsonParseService.parseGearSetup(o));return{globalSettings:this.jsonParseService.parseGlobalSettings(t.globalSettings),gearPresets:i,inputGearSetups:t.inputGearSetups.map(o=>({gearSetupSettings:this.jsonParseService.parseGearSetupSettings(o.gearSetupSettings),mainGearSimSetup:o.mainGearSimSetup,gearSimSetups:o.gearSimSetups}))}}getInputSetupAsJson(){return JSON.stringify(this.inputSetup$.getValue(),this.replacerWithPath((t,i,o)=>i instanceof Set?[...i]:T.d.some(a=>a.test(o))?void 0:i))}replacerWithPath(t){const i=new Map;return function(o,a){const r=i.get(this)+(Array.isArray(this)?`[${o}]`:"."+o);return a===Object(a)&&i.set(a,r),t.call(this,o,a,r.replace(/undefined\.\.?/,""))}}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(G.a))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var y=p(349),A=p(4873),N=p(7704),S=p(5808),I=p(6457);let J=(()=>{class n{constructor(t){this.inputService=t,this.npcInfo={npc:null,raidLevel:0,pathLevel:0,overlyDraining:!1,isChallengeMode:!1}}ngOnInit(){this.inputService.globalSettingsWatch().subscribe(t=>{this.globalSettings=t,this.npcInfo=(0,S.S)(this.globalSettings)})}npcInfoChanged(t){this.npcInfo=t,this.globalSettings=(0,N.Z)(this.globalSettings,(0,S.x)(t))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-simple-sim-settings"]],decls:15,vars:1,consts:[[1,"mb-4"],[1,"row","mb-1","align-items-center"],[1,"col-2"],[1,"col-10","col-xxl-6",3,"npcInfo","npcInfoChanged"],[1,"row","mb-4","align-items-center"],[1,"col","col-sm-3"],[1,"row","align-items-center"],[1,"col-auto","pe-0"],["for","teamSize"],[1,"col"],["id","teamSize","type","number","min","1","max","100",1,"form-control"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Npc Settings"),e.qZA(),e.TgZ(4,"app-npc-input",3),e.NdJ("npcInfoChanged",function(a){return i.npcInfoChanged(a)}),e.qZA()()(),e.TgZ(5,"div",4)(6,"div",2),e._uU(7,"General Settings"),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),e._uU(12,"Something"),e.qZA()(),e.TgZ(13,"div",9),e._UZ(14,"input",10),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("npcInfo",i.npcInfo))},dependencies:[I.H],encapsulation:2}),n})();var m=p(3074),P=p(777);const U={AND:"and",OR:"or"},Q={EQUAL:"==",GRT_THAN:">",LESS_THAN:"<",GRT_EQ_THAN:">=",LESS_EQ_THAN:"<="},k={NPC_HITPOINTS:"Npc hitpoints",DMG_DEALT:"Damage dealt",ATTACK_COUNT:"Attack count"};var u=p(4006),f=p(3778);function M(n,s){if(1&n&&(e.TgZ(0,"ng-option",15),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",t.value," ")}}function w(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"ng-select",9),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.KtG(a.nextComparison=o)}),e.YNc(2,M,2,2,"ng-option",10),e.ALo(3,"keyvalue"),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngModel",t.nextComparison)("clearable",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(3,3,i.booleanOperators))}}function q(n,s){if(1&n&&(e.TgZ(0,"ng-option",15),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",t.value," ")}}function O(n,s){if(1&n&&(e.TgZ(0,"ng-option",15),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",t.value," ")}}function F(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6),e.YNc(2,w,4,5,"ng-container",7),e.qZA(),e.TgZ(3,"div",8)(4,"ng-select",9),e.NdJ("ngModelChange",function(o){const r=e.CHM(t).$implicit;return e.KtG(r.variable=o)}),e.YNc(5,q,2,2,"ng-option",10),e.ALo(6,"keyvalue"),e.qZA()(),e.TgZ(7,"div",11)(8,"ng-select",9),e.NdJ("ngModelChange",function(o){const r=e.CHM(t).$implicit;return e.KtG(r.comparison=o)}),e.YNc(9,O,2,2,"ng-option",10),e.ALo(10,"keyvalue"),e.qZA()(),e.TgZ(11,"div",11)(12,"input",12),e.NdJ("ngModelChange",function(o){const r=e.CHM(t).$implicit;return e.KtG(r.value=o)}),e.qZA()(),e.TgZ(13,"div",13)(14,"button",14),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.removeCondition(a))}),e._uU(15,"X"),e.qZA()()()}if(2&n){const t=s.$implicit,i=s.first,o=e.oxw();e.xp6(2),e.Q6J("ngIf",!i),e.xp6(2),e.Q6J("ngModel",t.variable)("clearable",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(6,8,o.conditionVariables)),e.xp6(3),e.Q6J("ngModel",t.comparison)("clearable",!1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(10,10,o.comparisonOperators)),e.xp6(3),e.Q6J("ngModel",t.value)}}let D=(()=>{class n{constructor(){this.conditions=[],this.booleanOperators=U,this.comparisonOperators=Q,this.conditionVariables=k,this.conditionsChanged=new e.vpe,this.maxConditions=5}addCondition(){this.conditions.push({variable:"NPC_HITPOINTS",comparison:"EQUAL",value:0,nextComparison:"AND"}),this.conditionsChanged.emit(this.conditions)}removeCondition(t){const i=this.conditions.indexOf(t);i>=0&&this.conditions.splice(i,1),this.conditionsChanged.emit(this.conditions)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-condition"]],inputs:{conditions:"conditions"},outputs:{conditionsChanged:"conditionsChanged"},decls:6,vars:2,consts:[[1,""],["class","row align-items-center mb-1",4,"ngFor","ngForOf"],[1,"text-end"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"bi","bi-plus"],[1,"row","align-items-center","mb-1"],[1,"col-2","pe-0"],[4,"ngIf"],[1,"col","px-1"],[3,"ngModel","clearable","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-2","px-1"],["type","number","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-auto","ps-1"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,F,16,12,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return i.addCondition()}),e._UZ(4,"i",4),e._uU(5," Add condition "),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.conditions),e.xp6(2),e.Q6J("disabled",i.conditions.length>=i.maxConditions))},dependencies:[l.sg,l.O5,u.Fj,u.wV,u.JJ,u.On,f.w9,f.jq,l.Nd],encapsulation:2}),n})();var x=p(9867);function Y(n,s){if(1&n&&(e.TgZ(0,"div",7),e._UZ(1,"img",8),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.MGl("src","data:image/png;base64,",null==t.gearSetup.gear[3]?null:t.gearSetup.gear[3].icon,"",e.LSH)}}function E(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div"),e._UZ(2,"img",8),e._uU(3),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(2),e.MGl("src","assets/img/magic_spells/",t.gearSetup.spell,".png",e.LSH),e.xp6(1),e.hij(" ",t.gearSetup.spell,"")}}function H(n,s){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.gearSetup.attackStyle?null:t.gearSetup.attackStyle.split(" ")[0]," ")}}function L(n,s){1&n&&(e.TgZ(0,"div",9),e._UZ(1,"img",10),e.qZA())}function j(n,s){if(1&n&&(e.TgZ(0,"div",11),e._UZ(1,"img",8),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.MGl("src","assets/img/prayer/",t,".png",e.LSH)}}let v=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-gear-setup-label"]],inputs:{gearSetup:"gearSetup"},decls:11,vars:6,consts:[[1,"d-flex","align-items-center","justify-content-center",2,"height","38px"],["class","text-center me-1",4,"ngIf"],[4,"ngIf","ngIfElse"],["noSpell",""],["class","mx-1",4,"ngIf"],[1,"d-flex","mx-1"],["class","px-1",4,"ngFor","ngForOf"],[1,"text-center","me-1"],[3,"src"],[1,"mx-1"],["src","assets/img/other/special_attack_orb.png"],[1,"px-1"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Y,2,1,"div",1),e.TgZ(2,"div"),e._uU(3),e.qZA()(),e.TgZ(4,"div",0),e.YNc(5,E,4,2,"ng-container",2),e.YNc(6,H,2,1,"ng-template",null,3,e.W1O),e.YNc(8,L,2,0,"div",4),e.TgZ(9,"div",5),e.YNc(10,j,2,1,"div",6),e.qZA()()),2&t){const o=e.MAs(7);e.xp6(1),e.Q6J("ngIf",null==i.gearSetup.gear[3]?null:i.gearSetup.gear[3].icon),e.xp6(2),e.hij(" ",i.gearSetup.setupName," "),e.xp6(2),e.Q6J("ngIf",i.gearSetup.spell)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",i.gearSetup.isSpecial),e.xp6(2),e.Q6J("ngForOf",i.gearSetup.prayers)}},dependencies:[l.sg,l.O5],encapsulation:2}),n})();function K(n,s){if(1&n&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&n){const t=s.item;e.xp6(1),e.hij(" ",t.setupName," ")}}function $(n,s){if(1&n&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&n){const t=s.item;e.xp6(1),e.hij(" ",t.setupName," ")}}function R(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",14)(2,"div",3)(3,"div",4),e._uU(4,"Select preset:"),e.qZA(),e.TgZ(5,"div",5)(6,"app-ng-select-lazy-load",6),e.NdJ("valueChanged",function(o){const r=e.CHM(t).index,Ue=e.oxw(2);return e.KtG(Ue.selectedGearPresetChange(o,r))}),e.YNc(7,$,2,1,"ng-template",null,7,e.W1O),e.qZA()(),e.TgZ(10,"div",15)(11,"button",16),e.NdJ("click",function(){const a=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.removeSimSetup(a))}),e._UZ(12,"i",17),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9),e._UZ(15,"app-gear-setup-label",10),e.qZA(),e.TgZ(16,"div",5),e._UZ(17,"app-condition",18),e.qZA()()(),e.BQk()}if(2&n){const t=s.$implicit,i=s.index,o=e.oxw(2);e.xp6(6),e.Q6J("valueType",o.GearSetup)("allValues",o.allGearPresets)("selectedValue",o.selectedGearPresets[i])("clearable",!1),e.xp6(9),e.Q6J("gearSetup",o.selectedGearPresets[i]),e.xp6(2),e.Q6J("conditions",t.conditions)}}function V(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.addNewSimSetup())}),e._UZ(1,"i",20),e._uU(2," Add Sim Setup "),e.qZA()}}function B(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"h6"),e._uU(2,"Main Setup"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e._uU(6,"Select preset:"),e.qZA(),e.TgZ(7,"div",5)(8,"app-ng-select-lazy-load",6),e.NdJ("valueChanged",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedMainGearChange(o))}),e.YNc(9,K,2,1,"ng-template",null,7,e.W1O),e.qZA()()(),e.TgZ(12,"div",8)(13,"div",9),e._UZ(14,"app-gear-setup-label",10),e.qZA()()(),e.TgZ(15,"h6"),e._uU(16,"Fill Setups"),e.qZA(),e.YNc(17,R,18,6,"ng-container",11),e.TgZ(18,"div",8),e.YNc(19,V,3,0,"button",12),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(8),e.Q6J("valueType",t.GearSetup)("allValues",t.allGearPresets)("selectedValue",t.selectedMainGearSetup)("clearable",!1),e.xp6(6),e.Q6J("gearSetup",t.selectedMainGearSetup),e.xp6(3),e.Q6J("ngForOf",t.gearSimSetups),e.xp6(2),e.Q6J("ngIf",t.gearSimSetups.length<t.maxSimSetups)}}function W(n,s){1&n&&(e.TgZ(0,"p"),e._uU(1,"Add gear presets to start configuring sim setups"),e.qZA())}let z=(()=>{class n{constructor(t){this.inputService=t,this.selectedGearPresets=[],this.maxSimSetups=50}ngOnInit(){this.inputService.gearSetupPresetsWatch().subscribe(t=>this.allGearPresets=t),this.gearSimSetups.forEach(t=>this.selectedGearPresets.push(this.allGearPresets[t.gearPresetIndex])),this.selectedMainGearSetup=this.allGearPresets[0]}addNewSimSetup(t){this.gearSimSetups.push((0,m.Z)(t)??{gearPresetIndex:0,conditions:[]}),this.selectedGearPresets.push(this.allGearPresets[0])}removeSimSetup(t){this.gearSimSetups.splice(t,1),this.selectedGearPresets.splice(t,1)}selectedGearPresetChange(t,i){this.selectedGearPresets[i]=t,this.gearSimSetups[i].gearPresetIndex=this.allGearPresets.findIndex(o=>o===t)}selectedMainGearChange(t){this.selectedMainGearSetup=t,this.mainGearSimSetup.gearPresetIndex=this.allGearPresets.findIndex(i=>i===t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-gear-sim-setups"]],inputs:{gearSimSetups:"gearSimSetups",mainGearSimSetup:"mainGearSimSetup"},decls:4,vars:2,consts:[[4,"ngIf","ngIfElse"],["noPresets",""],[1,"mb-5"],[1,"d-flex","align-items-center","mb-2"],[1,"me-2"],[1,"flex-fill"],["searchProperty","setupName","placeholder","Select preset",3,"valueType","allValues","selectedValue","clearable","valueChanged"],["dropdownLabel","","dropdownOptions",""],[1,"d-flex"],[1,"me-3"],[3,"gearSetup"],[4,"ngFor","ngForOf"],["type","button","class","btn btn-primary text-center",3,"click",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"mb-4"],[1,"flex-shrink-1","ms-2"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"],[3,"conditions"],["type","button",1,"btn","btn-primary","text-center",3,"click"],[1,"bi","bi-plus"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,B,20,7,"ng-container",0),e.YNc(2,W,2,0,"ng-template",null,1,e.W1O),e.qZA()),2&t){const o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",i.allGearPresets.length>0)("ngIfElse",o)}},dependencies:[l.sg,l.O5,D,x.W,v],encapsulation:2}),n})();const X=function(n){return{active:n}};function ee(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li",7)(1,"div",8)(2,"button",9),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.openNewSetupTab(a))}),e._UZ(3,"i",10),e.qZA(),e.TgZ(4,"div")(5,"button",11),e.NdJ("click",function(){const a=e.CHM(t).index,r=e.oxw();return e.KtG(r.deleteTab(a))}),e._UZ(6,"i",12),e.qZA()()(),e.TgZ(7,"a",13),e.NdJ("click",function(){const a=e.CHM(t).index,r=e.oxw();return e.KtG(r.selectTab(a))}),e.TgZ(8,"div",14),e._uU(9),e.qZA()()()}if(2&n){const t=s.index,i=e.oxw();e.xp6(2),e.Q6J("disabled",i.inputGearSetups.length>=i.maxSetupTabs),e.xp6(5),e.Q6J("ngClass",e.VKq(3,X,i.activeTab===t)),e.xp6(2),e.hij("Setup - ",t+1,"")}}function te(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openNewSetupTab())}),e._UZ(1,"i",16),e._uU(2," Add setup "),e.qZA()}}function ne(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",17)(2,"div",18)(3,"div",19)(4,"app-gear-setup-settings",20),e.NdJ("gearSetupSettingsChange",function(o){const r=e.CHM(t).$implicit;return e.KtG(r.gearSetupSettings=o)}),e.qZA()()(),e.TgZ(5,"div"),e._UZ(6,"app-gear-sim-setups",21),e.qZA()(),e.BQk()}if(2&n){const t=s.$implicit,i=s.index,o=e.oxw();e.xp6(1),e.Q6J("hidden",o.activeTab!==i),e.xp6(3),e.Q6J("gearSetupSettings",t.gearSetupSettings),e.xp6(2),e.Q6J("gearSimSetups",t.gearSimSetups)("mainGearSimSetup",t.mainGearSimSetup)}}let ie=(()=>{class n{constructor(t,i){this.changeDetector=t,this.inputService=i,this.activeTab=0,this.maxSetupTabs=5}ngOnInit(){this.inputService.inputGearSetupsWatch().subscribe(t=>this.inputGearSetups=t),this.changeDetector.detectChanges()}openNewSetupTab(t){this.inputGearSetups.push(t?(0,m.Z)(t):{gearSetupSettings:null,mainGearSimSetup:{gearPresetIndex:0,conditions:[]},gearSimSetups:[]}),this.selectTab(this.inputGearSetups.length-1),this.changeDetector.detectChanges()}selectTab(t){this.activeTab=t}deleteTab(t){this.inputGearSetups.splice(t,1),this.activeTab>=t&&(this.activeTab=Math.max(0,this.activeTab-1))}loadInputSetup(t){this.inputGearSetups=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-gear-setup-tabs"]],decls:8,vars:3,consts:[[1,"navbar","navbar-expand-sm","bg-light","mb-3","rounded"],[1,"container-fluid"],[1,"navbar-nav","nav-tabs","flex-wrap"],["class","nav-item",4,"ngFor","ngForOf"],[1,"me-auto"],["type","button","class","btn btn-primary btn-lg ms-3 my-2",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"nav-item"],[1,"d-flex","align-items-center","justify-content-between","px-3","pb-2"],["type","button",1,"btn","btn-primary","me-2",3,"disabled","click"],[1,"bi","bi-clipboard-plus"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-x"],["role","button",1,"nav-link",3,"ngClass","click"],[1,"text-center","fs-5"],["type","button",1,"btn","btn-primary","btn-lg","ms-3","my-2",3,"click"],[1,"bi","bi-plus"],[3,"hidden"],[1,"row","justify-content-center"],[1,"mb-2","col-12","col-xl-10"],[3,"gearSetupSettings","gearSetupSettingsChange"],[3,"gearSimSetups","mainGearSimSetup"]],template:function(t,i){1&t&&(e.TgZ(0,"div")(1,"nav",0)(2,"div",1)(3,"ul",2),e.YNc(4,ee,10,5,"li",3),e.TgZ(5,"div",4),e.YNc(6,te,3,0,"button",5),e.qZA()()()(),e.YNc(7,ne,7,4,"ng-container",6),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngForOf",i.inputGearSetups),e.xp6(2),e.Q6J("ngIf",i.inputGearSetups.length<i.maxSetupTabs),e.xp6(1),e.Q6J("ngForOf",i.inputGearSetups))},dependencies:[l.mk,l.sg,l.O5,P.L,z],encapsulation:2}),n})();var se=p(1956);function oe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",3),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addNewGearPreset())}),e._UZ(1,"i",4),e._uU(2," Add preset "),e.qZA()}}const ae=function(n,s){return{"border-primary":n,"border-secondary":s}};function re(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",5),e._UZ(2,"app-gear-setup-label",6),e.TgZ(3,"div",7)(4,"div",8)(5,"button",9),e.NdJ("click",function(){const a=e.CHM(t).index,r=e.oxw();return e.KtG(r.editGearPreset(a))}),e._UZ(6,"i",10),e._uU(7," Edit "),e.qZA()(),e.TgZ(8,"div",11)(9,"button",12),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.addNewGearPreset(a))}),e._UZ(10,"i",13),e.qZA()(),e.TgZ(11,"div",14)(12,"button",15),e.NdJ("click",function(){const a=e.CHM(t).index,r=e.oxw();return e.KtG(r.removeGearPreset(a))}),e._UZ(13,"i",16),e.qZA()()()(),e.BQk()}if(2&n){const t=s.$implicit,i=s.index,o=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(3,ae,o.activeIndex===i,o.activeIndex!==i)),e.xp6(1),e.Q6J("gearSetup",t),e.xp6(7),e.Q6J("disabled",o.gearPresets.length>=o.maxGearPresets)}}let pe=(()=>{class n{constructor(t){this.inputService=t,this.selectGearSetup=new e.vpe,this.maxGearPresets=50,this.activeIndex=null}ngOnInit(){this.inputService.gearSetupPresetsWatch().subscribe(t=>this.gearPresets=t)}addNewGearPreset(t){this.gearPresets.push((0,m.Z)(t)??{...(0,m.Z)(se.Vb),setupName:"Preset Name"}),this.activeIndex=this.gearPresets.length-1,this.editGearPreset(this.activeIndex)}removeGearPreset(t){this.gearPresets.splice(t,1),this.selectGearSetup.emit(null),this.activeIndex=null}editGearPreset(t){this.activeIndex=t,this.selectGearSetup.emit(this.gearPresets[t])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-gear-presets"]],outputs:{selectGearSetup:"selectGearSetup"},decls:6,vars:2,consts:[[1,"mb-2"],["type","button","class","btn btn-primary text-center",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","text-center",3,"click"],[1,"bi","bi-plus"],[1,"mb-2","p-1","border","border-2","rounded",3,"ngClass"],[3,"gearSetup"],[1,"d-flex","align-items-center"],[1,"btn-group","flex-fill"],["type","button",1,"btn","btn-primary","flex-fill",3,"click"],[1,"bi","bi-pencil-fill"],[1,"ms-2"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"bi","bi-clipboard-plus"],[1,"flex-shrink-1","ms-2"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"]],template:function(t,i){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"h5"),e._uU(3,"Gear Presets"),e.qZA(),e.YNc(4,oe,3,0,"button",1),e.qZA(),e.YNc(5,re,14,6,"ng-container",2),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngIf",i.gearPresets.length<i.maxGearPresets),e.xp6(1),e.Q6J("ngForOf",i.gearPresets))},dependencies:[l.mk,l.sg,l.O5,v],encapsulation:2}),n})();var le=p(2869);function ce(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.ALo(3,"tickToTime"),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(2),e.hij("results: ",e.lcZ(3,1,t.results.results[0].ticksToKill),"")}}let ue=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-simple-sim-results"]],inputs:{results:"results"},decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,i){1&t&&e.YNc(0,ce,4,3,"ng-container",0),2&t&&e.Q6J("ngIf",(null==i.results?null:i.results.results)&&!(null!=i.results&&i.results.error))},dependencies:[l.O5,le.H],encapsulation:2}),n})();var me=p(5698),ge=p(7080);function de(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.item.setupName," ")}function _e(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-ng-select-lazy-load",5),e.NdJ("valueChanged",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedSetupChange(o))}),e.YNc(2,de,1,1,"ng-template",null,6,e.W1O),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("valueType",t.ExampleSetup)("allValues",t.exampleSetups)("selectedValue",t.selectedSetup)}}function Se(n,s){1&n&&(e.TgZ(0,"div",7)(1,"span",8),e._uU(2,"Loading..."),e.qZA()())}let fe=(()=>{class n{constructor(t,i){this.staticDataService=t,this.inputService=i}ngOnInit(){this.staticDataService.SimplSimExampleSetups$.pipe((0,me.q)(1)).subscribe(t=>{this.exampleSetups=t})}selectedSetupChange(t){if(!t)return;const i=this.inputService.getInputGearSetupFromJson(t.inputSetup);this.inputService.loadInputSetup(i)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ge.v),e.Y36(c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-example-setups"]],decls:7,vars:2,consts:[[1,"d-flex","align-items-center"],[1,"me-3"],[1,"flex-grow-1"],[4,"ngIf","ngIfElse"],["showSpinner",""],["searchProperty","setupName","placeholder","Select example setup",3,"valueType","allValues","selectedValue","valueChanged"],["dropdownLabel","","dropdownOptions",""],["role","status",1,"spinner-border","ms-1"],[1,"visually-hidden"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Load example setup"),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,_e,5,3,"ng-container",3),e.YNc(5,Se,3,0,"ng-template",null,4,e.W1O),e.qZA()()),2&t){const o=e.MAs(6);e.xp6(4),e.Q6J("ngIf",i.exampleSetups)("ngIfElse",o)}},dependencies:[l.O5,x.W],encapsulation:2}),n})();function xe(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"button",26),e._UZ(2,"span",27),e.TgZ(3,"span",28),e._uU(4," Loading..."),e.qZA()(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.loading)}}function ve(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.runSimpleDmgSimCalc())}),e.TgZ(2,"span",28),e._uU(3,"Run Damage Simulator"),e.qZA()(),e.BQk()}}function be(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1,"\xa0"),e.qZA())}function he(n,s){1&n&&(e.TgZ(0,"div",32),e._uU(1," Damage sim done, results above! "),e.qZA())}function Ce(n,s){if(1&n&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.simpleSimResults.error)}}function Te(n,s){if(1&n&&(e.ynx(0),e.YNc(1,he,2,0,"div",30),e.YNc(2,Ce,2,1,"div",31),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.simpleSimResults&&!(null!=t.simpleSimResults&&t.simpleSimResults.error)),e.xp6(1),e.Q6J("ngIf",null==t.simpleSimResults?null:t.simpleSimResults.error)}}function Ze(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"app-gear-setup",36),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("gearSetup",t.selectedGearSetup)}}function Ge(n,s){1&n&&e._uU(0," Select or add a new setup ")}function ye(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Ze,2,1,"ng-container",34),e.YNc(2,Ge,1,0,"ng-template",null,35,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.selectedGearSetup)("ngIfElse",t)}}function Ae(n,s){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-gear-setup-tabs"),e.qZA())}const b=function(n){return{active:n}},Ne=[{path:"",component:(()=>{class n{constructor(t,i){this.damageSimservice=t,this.inputService=i,this.loading=!1,this.simpleSimResults=null,this.activeTab="gear-setup-tabs",this.selectedGearSetup=null}runSimpleDmgSimCalc(){this.loading=!0,this.simpleSimResults=null;const t=this.inputService.getInputSetupAsJson();this.damageSimservice.runSimpleSim(t).subscribe({next:i=>{this.loading=!1,this.simpleSimResults=i},error:({error:{error:i}})=>{this.loading=!1;const o=i?i[0].toUpperCase()+i.slice(1):"Unkown error";this.simpleSimResults={...this.simpleSimResults,error:o}}})}onSelectGearSetup(t){this.selectedGearSetup=t,this.activeTab="preset-editor"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.z),e.Y36(c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-simple-dmg-sim"]],decls:41,vars:13,consts:[[1,"container"],[1,"d-flex","align-items-center","justify-content-center","mb-4"],["src","assets/img/menu/dps-detail.png",1,"img-fluid",2,"width","70px"],[1,"ms-2"],[1,"display-1"],[1,"mb-2"],[3,"results"],[1,"row","mb-4"],[1,"d-flex","justify-content-between","mb-5","flex-wrap"],[1,"flex-fill","mb-1"],[1,"flex-grow-1"],[1,"flex-shrink-1","d-flex","ms-1"],[1,"mb-4"],[1,"d-flex","mb-1"],["role","group",1,"flex-fill","btn-group","btn-group-lg"],[4,"ngIf"],[1,"row"],[1,"col-3"],[3,"selectGearSetup"],[1,"col"],[1,"navbar","navbar-expand-sm","bg-light","mb-3","rounded"],[1,"container-fluid","px-2"],[1,"navbar-nav","nav-tabs","flex-wrap"],[1,"nav-item"],["role","button",1,"nav-link",3,"ngClass","click"],[1,"text-center"],["type","button",1,"btn","btn-primary",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"sr-only"],["type","button",1,"btn","btn-primary",3,"click"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-success"],[1,"text-danger"],[4,"ngIf","ngIfElse"],["emptySetup",""],[3,"gearSetup"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div"),e._UZ(3,"img",2),e.qZA(),e.TgZ(4,"div",3)(5,"h1",4),e._uU(6,"Simple Damage Sim"),e.qZA()()(),e.TgZ(7,"div",5),e._UZ(8,"app-simple-sim-results",6),e.qZA(),e._UZ(9,"hr",7),e.TgZ(10,"div",8)(11,"div",9),e._UZ(12,"app-example-setups"),e.qZA(),e._UZ(13,"div",10)(14,"div",11),e.qZA(),e._UZ(15,"app-simple-sim-settings")(16,"app-shared-settings"),e.TgZ(17,"div",12)(18,"div",13)(19,"div",14),e.YNc(20,xe,5,1,"ng-container",15),e.YNc(21,ve,4,0,"ng-container",15),e.qZA()(),e.YNc(22,be,2,0,"div",15),e.YNc(23,Te,3,2,"ng-container",15),e.qZA(),e.TgZ(24,"div",16)(25,"div",17)(26,"app-gear-presets",18),e.NdJ("selectGearSetup",function(a){return i.onSelectGearSetup(a)}),e.qZA()(),e.TgZ(27,"div",19)(28,"nav",20)(29,"div",21)(30,"ul",22)(31,"li",23)(32,"a",24),e.NdJ("click",function(){return i.activeTab="preset-editor"}),e.TgZ(33,"div",25),e._uU(34,"Preset Editor"),e.qZA()()(),e.TgZ(35,"li",23)(36,"a",24),e.NdJ("click",function(){return i.activeTab="gear-setup-tabs"}),e.TgZ(37,"div",25),e._uU(38,"Gear Setups"),e.qZA()()()()()(),e.YNc(39,ye,4,2,"div",15),e.YNc(40,Ae,2,0,"div",15),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("results",i.simpleSimResults),e.xp6(12),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngIf",!i.loading),e.xp6(1),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngIf",!i.loading),e.xp6(9),e.Q6J("ngClass",e.VKq(9,b,"preset-editor"===i.activeTab)),e.xp6(4),e.Q6J("ngClass",e.VKq(11,b,"gear-setup-tabs"===i.activeTab)),e.xp6(3),e.Q6J("ngIf","preset-editor"===i.activeTab),e.xp6(1),e.Q6J("ngIf","gear-setup-tabs"===i.activeTab))},dependencies:[l.mk,l.O5,y.k,A.H,J,ie,pe,ue,fe],encapsulation:2}),n})()}];let Ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[_.Bz.forChild(Ne),_.Bz]}),n})();var Je=p(263);let Pe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.ez,u.u5,Ie,Je.o]}),n})()}}]);