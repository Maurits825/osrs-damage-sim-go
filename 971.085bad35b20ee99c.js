"use strict";(self.webpackChunkosrs_damage_sim=self.webpackChunkosrs_damage_sim||[]).push([[971],{6971:(St,b,o)=>{o.r(b),o.d(b,{SimpleDmgSimModule:()=>_t});var p=o(177),f=o(8185),e=o(4438),j=o(4805);const I={iterations:1e5,isDetailedRun:!1};var y=o(2864),E=o(3858),$=o(4412),d=o(6354),D=o(6110);let u=(()=>{class n{constructor(t){this.jsonParseService=t,this.inputSetup$=new $.t({globalSettings:y.C,simSettings:I,gearPresets:[],inputGearSetups:[{gearSetupSettings:null,mainGearSimSetup:{gearPresetIndex:0,conditions:[]},gearSimSetups:[]}]})}getInputSetup(){return this.inputSetup$.getValue()}inputGearSetupsWatch(){return this.inputSetup$.pipe((0,d.T)(t=>t.inputGearSetups))}gearSetupPresetsWatch(){return this.inputSetup$.pipe((0,d.T)(t=>t.gearPresets))}globalSettingsWatch(){return this.inputSetup$.pipe((0,d.T)(t=>t.globalSettings))}simSettingsWatch(){return this.inputSetup$.pipe((0,d.T)(t=>t.simSettings))}loadInputSetup(t){this.inputSetup$.next(t)}getInputGearSetupFromJson(t){const i=t.gearPresets.map(s=>this.jsonParseService.parseGearSetup(s));return{globalSettings:this.jsonParseService.parseGlobalSettings(t.globalSettings),simSettings:t.simSettings,gearPresets:i,inputGearSetups:t.inputGearSetups.map(s=>({gearSetupSettings:this.jsonParseService.parseGearSetupSettings(s.gearSetupSettings),mainGearSimSetup:s.mainGearSimSetup,gearSimSetups:s.gearSimSetups}))}}getInputSetupAsJson(){return JSON.stringify(this.inputSetup$.getValue(),this.replacerWithPath((t,i,s)=>i instanceof Set?[...i]:E.g.some(l=>l.test(s))?void 0:i))}replacerWithPath(t){const i=new Map;return function(s,l){const r=i.get(this)+(Array.isArray(this)?`[${s}]`:"."+s);return l===Object(l)&&i.set(l,r),t.call(this,s,l,r.replace(/undefined\.\.?/,""))}}static{this.\u0275fac=function(i){return new(i||n)(e.KVO(D.n))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var N=o(6868),P=o(2908),V=o(2401),v=o(4167),c=o(9417),Y=o(6397);let M=(()=>{class n{constructor(t){this.inputService=t,this.npcInfo={npc:null,raidLevel:0,pathLevel:0,overlyDraining:!1,isChallengeMode:!1}}ngOnInit(){this.inputService.globalSettingsWatch().subscribe(t=>{this.globalSettings=t,this.npcInfo=(0,v.J)(this.globalSettings)}),this.inputService.simSettingsWatch().subscribe(t=>{this.simSettings=t})}npcInfoChanged(t){this.npcInfo=t,this.globalSettings=(0,V.A)(this.globalSettings,(0,v.T)(t))}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(u))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-simple-sim-settings"]],decls:20,vars:3,consts:[[1,"mb-4"],[1,"row","mb-1","align-items-center"],[1,"col-2"],[1,"col-10","col-xxl-6",3,"npcInfoChanged","npcInfo"],[1,"row","mb-4","align-items-center"],[1,"col"],[1,"row","align-items-center"],[1,"col-auto","pe-0"],["for","iterations"],["id","iterations","type","number","min","1","max","500000",1,"form-control",3,"ngModelChange","ngModel"],["for","isDetailedRun"],["id","isDetailedRun","type","checkbox",1,"form-check-input",3,"ngModelChange","ngModel"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.EFF(3,"Npc Settings"),e.k0s(),e.j41(4,"app-npc-input",3),e.bIt("npcInfoChanged",function(r){return s.npcInfoChanged(r)}),e.k0s()()(),e.j41(5,"div",4)(6,"div",2),e.EFF(7,"General Settings"),e.k0s(),e.j41(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),e.EFF(12,"Iterations"),e.k0s()(),e.j41(13,"div",5)(14,"input",9),e.mxI("ngModelChange",function(r){return e.DH7(s.simSettings.iterations,r)||(s.simSettings.iterations=r),r}),e.k0s()(),e.j41(15,"div",7)(16,"label",10),e.EFF(17,"Detailed Run"),e.k0s()(),e.j41(18,"div",5)(19,"input",11),e.mxI("ngModelChange",function(r){return e.DH7(s.simSettings.isDetailedRun,r)||(s.simSettings.isDetailedRun=r),r}),e.k0s()()()()()),2&i&&(e.R7$(4),e.Y8G("npcInfo",s.npcInfo),e.R7$(10),e.R50("ngModel",s.simSettings.iterations),e.R7$(5),e.R50("ngModel",s.simSettings.isDetailedRun))},dependencies:[c.me,c.Q0,c.Zm,c.BC,c.VZ,c.zX,c.vS,Y.V],encapsulation:2})}}return n})();var m=o(7298),O=o(2955);const X={AND:"and",OR:"or"},B={EQUAL:"==",GRT_THAN:">",LESS_THAN:"<",GRT_EQ_THAN:">=",LESS_EQ_THAN:"<="},w={NPC_HITPOINTS:"Npc hitpoints",DMG_DEALT:"Damage dealt",ATTACK_COUNT:"Attack count"};var C=o(396);function A(n,a){if(1&n&&(e.j41(0,"ng-option",15),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.Y8G("value",t.key),e.R7$(),e.SpI(" ",t.value," ")}}function U(n,a){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"ng-select",9),e.mxI("ngModelChange",function(s){e.eBV(t);const l=e.XpG().$implicit;return e.DH7(l.nextComparison,s)||(l.nextComparison=s),e.Njj(s)}),e.DNE(2,A,2,2,"ng-option",10),e.nI1(3,"keyvalue"),e.k0s(),e.bVm()}if(2&n){const t=e.XpG().$implicit,i=e.XpG();e.R7$(),e.R50("ngModel",t.nextComparison),e.Y8G("clearable",!1),e.R7$(),e.Y8G("ngForOf",e.bMT(3,3,i.booleanOperators))}}function H(n,a){if(1&n&&(e.j41(0,"ng-option",15),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.Y8G("value",t.key),e.R7$(),e.SpI(" ",t.value," ")}}function L(n,a){if(1&n&&(e.j41(0,"ng-option",15),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.Y8G("value",t.key),e.R7$(),e.SpI(" ",t.value," ")}}function z(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",5)(1,"div",6),e.DNE(2,U,4,5,"ng-container",7),e.k0s(),e.j41(3,"div",8)(4,"ng-select",9),e.mxI("ngModelChange",function(s){const l=e.eBV(t).$implicit;return e.DH7(l.variable,s)||(l.variable=s),e.Njj(s)}),e.DNE(5,H,2,2,"ng-option",10),e.nI1(6,"keyvalue"),e.k0s()(),e.j41(7,"div",11)(8,"ng-select",9),e.mxI("ngModelChange",function(s){const l=e.eBV(t).$implicit;return e.DH7(l.comparison,s)||(l.comparison=s),e.Njj(s)}),e.DNE(9,L,2,2,"ng-option",10),e.nI1(10,"keyvalue"),e.k0s()(),e.j41(11,"div",11)(12,"input",12),e.mxI("ngModelChange",function(s){const l=e.eBV(t).$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()(),e.j41(13,"div",13)(14,"button",14),e.bIt("click",function(){const s=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.removeCondition(s))}),e.EFF(15,"X"),e.k0s()()()}if(2&n){const t=a.$implicit,i=a.first,s=e.XpG();e.R7$(2),e.Y8G("ngIf",!i),e.R7$(2),e.R50("ngModel",t.variable),e.Y8G("clearable",!1),e.R7$(),e.Y8G("ngForOf",e.bMT(6,8,s.conditionVariables)),e.R7$(3),e.R50("ngModel",t.comparison),e.Y8G("clearable",!1),e.R7$(),e.Y8G("ngForOf",e.bMT(10,10,s.comparisonOperators)),e.R7$(3),e.R50("ngModel",t.value)}}let J=(()=>{class n{constructor(){this.conditions=[],this.booleanOperators=X,this.comparisonOperators=B,this.conditionVariables=w,this.conditionsChanged=new e.bkB,this.maxConditions=5}addCondition(){this.conditions.push({variable:"NPC_HITPOINTS",comparison:"EQUAL",value:0,nextComparison:"AND"}),this.conditionsChanged.emit(this.conditions)}removeCondition(t){const i=this.conditions.indexOf(t);i>=0&&this.conditions.splice(i,1),this.conditionsChanged.emit(this.conditions)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-condition"]],inputs:{conditions:"conditions"},outputs:{conditionsChanged:"conditionsChanged"},decls:6,vars:2,consts:[[1,""],["class","row align-items-center mb-1",4,"ngFor","ngForOf"],[1,"text-end"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"bi","bi-plus"],[1,"row","align-items-center","mb-1"],[1,"col-2","pe-0"],[4,"ngIf"],[1,"col","px-1"],[3,"ngModelChange","ngModel","clearable"],[3,"value",4,"ngFor","ngForOf"],[1,"col-2","px-1"],["type","number","placeholder","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-auto","ps-1"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[3,"value"]],template:function(i,s){1&i&&(e.j41(0,"div",0),e.DNE(1,z,16,12,"div",1),e.j41(2,"div",2)(3,"button",3),e.bIt("click",function(){return s.addCondition()}),e.nrm(4,"i",4),e.EFF(5," Add condition "),e.k0s()()()),2&i&&(e.R7$(),e.Y8G("ngForOf",s.conditions),e.R7$(2),e.Y8G("disabled",s.conditions.length>=s.maxConditions))},dependencies:[p.Sq,p.bT,c.me,c.Q0,c.BC,c.vS,C.vr,C.xt,p.lG],encapsulation:2})}}return n})();var S=o(9797);function W(n,a){if(1&n&&(e.j41(0,"div",7),e.nrm(1,"img",8),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Mz_("src","data:image/png;base64,",null==t.gearSetup.gear[3]?null:t.gearSetup.gear[3].icon,"",e.B4B)}}function K(n,a){if(1&n&&(e.qex(0),e.j41(1,"div"),e.nrm(2,"img",8),e.EFF(3),e.k0s(),e.bVm()),2&n){const t=e.XpG();e.R7$(2),e.Mz_("src","assets/img/magic_spells/",t.gearSetup.spell,".png",e.B4B),e.R7$(),e.SpI(" ",t.gearSetup.spell,"")}}function Q(n,a){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",null==t.gearSetup.attackStyle?null:t.gearSetup.attackStyle.split(" ")[0]," ")}}function Z(n,a){1&n&&(e.j41(0,"div",9),e.nrm(1,"img",10),e.k0s())}function q(n,a){if(1&n&&(e.j41(0,"div",11),e.nrm(1,"img",8),e.k0s()),2&n){const t=a.$implicit;e.R7$(),e.Mz_("src","assets/img/prayer/",t,".png",e.B4B)}}let k=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-gear-setup-label"]],inputs:{gearSetup:"gearSetup"},decls:11,vars:6,consts:[["noSpell",""],[1,"d-flex","align-items-center","justify-content-center",2,"height","38px"],["class","text-center me-1",4,"ngIf"],[4,"ngIf","ngIfElse"],["class","mx-1",4,"ngIf"],[1,"d-flex","mx-1"],["class","px-1",4,"ngFor","ngForOf"],[1,"text-center","me-1"],[3,"src"],[1,"mx-1"],["src","assets/img/other/special_attack_orb.png"],[1,"px-1"]],template:function(i,s){if(1&i&&(e.j41(0,"div",1),e.DNE(1,W,2,2,"div",2),e.j41(2,"div"),e.EFF(3),e.k0s()(),e.j41(4,"div",1),e.DNE(5,K,4,3,"ng-container",3)(6,Q,2,1,"ng-template",null,0,e.C5r)(8,Z,2,0,"div",4),e.j41(9,"div",5),e.DNE(10,q,2,2,"div",6),e.k0s()()),2&i){const l=e.sdS(7);e.R7$(),e.Y8G("ngIf",null==s.gearSetup.gear[3]?null:s.gearSetup.gear[3].icon),e.R7$(2),e.SpI(" ",s.gearSetup.setupName," "),e.R7$(2),e.Y8G("ngIf",s.gearSetup.spell)("ngIfElse",l),e.R7$(3),e.Y8G("ngIf",s.gearSetup.isSpecial),e.R7$(2),e.Y8G("ngForOf",s.gearSetup.prayers)}},dependencies:[p.Sq,p.bT],encapsulation:2})}}return n})();function ee(n,a){if(1&n&&(e.j41(0,"div",13),e.EFF(1),e.k0s()),2&n){const t=a.item;e.R7$(),e.SpI(" ",t.setupName," ")}}function te(n,a){if(1&n&&(e.j41(0,"div",13),e.EFF(1),e.k0s()),2&n){const t=a.item;e.R7$(),e.SpI(" ",t.setupName," ")}}function ne(n,a){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",14)(2,"div",4)(3,"div",5),e.EFF(4,"Select preset:"),e.k0s(),e.j41(5,"div",6)(6,"app-ng-select-lazy-load",7),e.bIt("valueChanged",function(s){const l=e.eBV(t).index,r=e.XpG(2);return e.Njj(r.selectedGearPresetChange(s,l))}),e.DNE(7,te,2,1,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(10,"div",15)(11,"button",16),e.bIt("click",function(){const s=e.eBV(t).index,l=e.XpG(2);return e.Njj(l.removeSimSetup(s))}),e.nrm(12,"i",17),e.k0s()()(),e.j41(13,"div",8)(14,"div",9),e.nrm(15,"app-gear-setup-label",10),e.k0s(),e.j41(16,"div",6),e.nrm(17,"app-condition",18),e.k0s()()(),e.bVm()}if(2&n){const t=a.$implicit,i=a.index,s=e.XpG(2);e.R7$(6),e.Y8G("valueType",s.GearSetup)("allValues",s.allGearPresets)("selectedValue",s.selectedGearPresets[i])("clearable",!1),e.R7$(9),e.Y8G("gearSetup",s.selectedGearPresets[i]),e.R7$(2),e.Y8G("conditions",t.conditions)}}function ie(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.addNewSimSetup())}),e.nrm(1,"i",20),e.EFF(2," Add Sim Setup "),e.k0s()}}function se(n,a){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"h6"),e.EFF(2,"Main Setup"),e.k0s(),e.j41(3,"div",3)(4,"div",4)(5,"div",5),e.EFF(6,"Select preset:"),e.k0s(),e.j41(7,"div",6)(8,"app-ng-select-lazy-load",7),e.bIt("valueChanged",function(s){e.eBV(t);const l=e.XpG();return e.Njj(l.selectedMainGearChange(s))}),e.DNE(9,ee,2,1,"ng-template",null,1,e.C5r),e.k0s()()(),e.j41(12,"div",8)(13,"div",9),e.nrm(14,"app-gear-setup-label",10),e.k0s()()(),e.j41(15,"h6"),e.EFF(16,"Fill Setups"),e.k0s(),e.DNE(17,ne,18,6,"ng-container",11),e.j41(18,"div",8),e.DNE(19,ie,3,0,"button",12),e.k0s(),e.bVm()}if(2&n){const t=e.XpG();e.R7$(8),e.Y8G("valueType",t.GearSetup)("allValues",t.allGearPresets)("selectedValue",t.selectedMainGearSetup)("clearable",!1),e.R7$(6),e.Y8G("gearSetup",t.selectedMainGearSetup),e.R7$(3),e.Y8G("ngForOf",t.gearSimSetups),e.R7$(2),e.Y8G("ngIf",t.gearSimSetups.length<t.maxSimSetups)}}function ae(n,a){1&n&&(e.j41(0,"p"),e.EFF(1,"Add gear presets to start configuring sim setups"),e.k0s())}let le=(()=>{class n{constructor(t){this.inputService=t,this.selectedGearPresets=[],this.maxSimSetups=50}ngOnInit(){this.inputService.gearSetupPresetsWatch().subscribe(t=>this.allGearPresets=t),this.gearSimSetups.forEach(t=>this.selectedGearPresets.push(this.allGearPresets[t.gearPresetIndex])),this.selectedMainGearSetup=this.allGearPresets[this.mainGearSimSetup.gearPresetIndex]}addNewSimSetup(t){this.gearSimSetups.push((0,m.A)(t)??{gearPresetIndex:0,conditions:[]}),this.selectedGearPresets.push(this.allGearPresets[0])}removeSimSetup(t){this.gearSimSetups.splice(t,1),this.selectedGearPresets.splice(t,1)}selectedGearPresetChange(t,i){this.selectedGearPresets[i]=t,this.gearSimSetups[i].gearPresetIndex=this.allGearPresets.findIndex(s=>s===t)}selectedMainGearChange(t){this.selectedMainGearSetup=t,this.mainGearSimSetup.gearPresetIndex=this.allGearPresets.findIndex(i=>i===t)}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(u))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-gear-sim-setups"]],inputs:{gearSimSetups:"gearSimSetups",mainGearSimSetup:"mainGearSimSetup"},decls:4,vars:2,consts:[["noPresets",""],["dropdownLabel","","dropdownOptions",""],[4,"ngIf","ngIfElse"],[1,"mb-5"],[1,"d-flex","align-items-center","mb-2"],[1,"me-2"],[1,"flex-fill"],["searchProperty","setupName","placeholder","Select preset",3,"valueChanged","valueType","allValues","selectedValue","clearable"],[1,"d-flex"],[1,"me-3"],[3,"gearSetup"],[4,"ngFor","ngForOf"],["type","button","class","btn btn-primary text-center",3,"click",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"mb-4"],[1,"flex-shrink-1","ms-2"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"],[3,"conditions"],["type","button",1,"btn","btn-primary","text-center",3,"click"],[1,"bi","bi-plus"]],template:function(i,s){if(1&i&&(e.j41(0,"div"),e.DNE(1,se,20,7,"ng-container",2)(2,ae,2,0,"ng-template",null,0,e.C5r),e.k0s()),2&i){const l=e.sdS(3);e.R7$(),e.Y8G("ngIf",s.allGearPresets.length>0)("ngIfElse",l)}},dependencies:[p.Sq,p.bT,J,S.N,k],encapsulation:2})}}return n})();const re=n=>({active:n});function oe(n,a){if(1&n){const t=e.RV6();e.j41(0,"li",7)(1,"div",8)(2,"button",9),e.bIt("click",function(){const s=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.openNewSetupTab(s))}),e.nrm(3,"i",10),e.k0s(),e.j41(4,"div")(5,"button",11),e.bIt("click",function(){const s=e.eBV(t).index,l=e.XpG();return e.Njj(l.deleteTab(s))}),e.nrm(6,"i",12),e.k0s()()(),e.j41(7,"a",13),e.bIt("click",function(){const s=e.eBV(t).index,l=e.XpG();return e.Njj(l.selectTab(s))}),e.j41(8,"div",14),e.EFF(9),e.k0s()()()}if(2&n){const t=a.index,i=e.XpG();e.R7$(2),e.Y8G("disabled",i.inputGearSetups.length>=i.maxSetupTabs),e.R7$(5),e.Y8G("ngClass",e.eq3(3,re,i.activeTab===t)),e.R7$(2),e.SpI("Setup - ",t+1,"")}}function pe(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.openNewSetupTab())}),e.nrm(1,"i",16),e.EFF(2," Add setup "),e.k0s()}}function ce(n,a){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",17)(2,"div",18)(3,"div",19)(4,"app-gear-setup-settings",20),e.mxI("gearSetupSettingsChange",function(s){const l=e.eBV(t).$implicit;return e.DH7(l.gearSetupSettings,s)||(l.gearSetupSettings=s),e.Njj(s)}),e.k0s()()(),e.j41(5,"div"),e.nrm(6,"app-gear-sim-setups",21),e.k0s()(),e.bVm()}if(2&n){const t=a.$implicit,i=a.index,s=e.XpG();e.R7$(),e.Y8G("hidden",s.activeTab!==i),e.R7$(3),e.R50("gearSetupSettings",t.gearSetupSettings),e.R7$(2),e.Y8G("gearSimSetups",t.gearSimSetups)("mainGearSimSetup",t.mainGearSimSetup)}}let ue=(()=>{class n{constructor(t,i){this.changeDetector=t,this.inputService=i,this.activeTab=0,this.maxSetupTabs=5}ngOnInit(){this.inputService.inputGearSetupsWatch().subscribe(t=>this.inputGearSetups=t),this.changeDetector.detectChanges()}openNewSetupTab(t){this.inputGearSetups.push(t?(0,m.A)(t):{gearSetupSettings:null,mainGearSimSetup:{gearPresetIndex:0,conditions:[]},gearSimSetups:[]}),this.selectTab(this.inputGearSetups.length-1),this.changeDetector.detectChanges()}selectTab(t){this.activeTab=t}deleteTab(t){this.inputGearSetups.splice(t,1),this.activeTab>=t&&(this.activeTab=Math.max(0,this.activeTab-1))}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(e.gRc),e.rXU(u))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-gear-setup-tabs"]],decls:8,vars:3,consts:[[1,"navbar","navbar-expand-sm","bg-light","mb-3","rounded"],[1,"container-fluid"],[1,"navbar-nav","nav-tabs","flex-wrap"],["class","nav-item",4,"ngFor","ngForOf"],[1,"me-auto"],["type","button","class","btn btn-primary btn-lg ms-3 my-2",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"nav-item"],[1,"d-flex","align-items-center","justify-content-between","px-3","pb-2"],["type","button",1,"btn","btn-primary","me-2",3,"click","disabled"],[1,"bi","bi-clipboard-plus"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-x"],["role","button",1,"nav-link",3,"click","ngClass"],[1,"text-center","fs-5"],["type","button",1,"btn","btn-primary","btn-lg","ms-3","my-2",3,"click"],[1,"bi","bi-plus"],[3,"hidden"],[1,"row","justify-content-center"],[1,"mb-2","col-12","col-xl-10"],[3,"gearSetupSettingsChange","gearSetupSettings"],[3,"gearSimSetups","mainGearSimSetup"]],template:function(i,s){1&i&&(e.j41(0,"div")(1,"nav",0)(2,"div",1)(3,"ul",2),e.DNE(4,oe,10,5,"li",3),e.j41(5,"div",4),e.DNE(6,pe,3,0,"button",5),e.k0s()()()(),e.DNE(7,ce,7,4,"ng-container",6),e.k0s()),2&i&&(e.R7$(4),e.Y8G("ngForOf",s.inputGearSetups),e.R7$(2),e.Y8G("ngIf",s.inputGearSetups.length<s.maxSetupTabs),e.R7$(),e.Y8G("ngForOf",s.inputGearSetups))},dependencies:[p.YU,p.Sq,p.bT,O.x,le],encapsulation:2})}}return n})();var me=o(2245);const de=(n,a)=>({"border-primary":n,"border-secondary":a});function ge(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",3),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.addNewGearPreset())}),e.nrm(1,"i",4),e.EFF(2," Add preset "),e.k0s()}}function _e(n,a){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",5),e.nrm(2,"app-gear-setup-label",6),e.j41(3,"div",7)(4,"div",8)(5,"button",9),e.bIt("click",function(){const s=e.eBV(t).index,l=e.XpG();return e.Njj(l.editGearPreset(s))}),e.nrm(6,"i",10),e.EFF(7," Edit "),e.k0s()(),e.j41(8,"div",11)(9,"button",12),e.bIt("click",function(){const s=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.addNewGearPreset(s))}),e.nrm(10,"i",13),e.k0s()(),e.j41(11,"div",14)(12,"button",15),e.bIt("click",function(){const s=e.eBV(t).index,l=e.XpG();return e.Njj(l.removeGearPreset(s))}),e.nrm(13,"i",16),e.k0s()()()(),e.bVm()}if(2&n){const t=a.$implicit,i=a.index,s=e.XpG();e.R7$(),e.Y8G("ngClass",e.l_i(3,de,s.activeIndex===i,s.activeIndex!==i)),e.R7$(),e.Y8G("gearSetup",t),e.R7$(7),e.Y8G("disabled",s.gearPresets.length>=s.maxGearPresets)}}let Se=(()=>{class n{constructor(t){this.inputService=t,this.selectGearSetup=new e.bkB,this.maxGearPresets=50,this.activeIndex=null}ngOnInit(){this.inputService.gearSetupPresetsWatch().subscribe(t=>this.gearPresets=t)}addNewGearPreset(t){this.gearPresets.push((0,m.A)(t)??{...(0,m.A)(me.cU),setupName:"Preset Name"}),this.activeIndex=this.gearPresets.length-1,this.editGearPreset(this.activeIndex)}removeGearPreset(t){this.gearPresets.splice(t,1),this.selectGearSetup.emit(null),this.activeIndex=null}editGearPreset(t){this.activeIndex=t,this.selectGearSetup.emit(this.gearPresets[t])}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(u))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-gear-presets"]],outputs:{selectGearSetup:"selectGearSetup"},decls:6,vars:2,consts:[[1,"mb-2"],["type","button","class","btn btn-primary text-center",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","text-center",3,"click"],[1,"bi","bi-plus"],[1,"mb-2","p-1","border","border-2","rounded",3,"ngClass"],[3,"gearSetup"],[1,"d-flex","align-items-center"],[1,"btn-group","flex-fill"],["type","button",1,"btn","btn-primary","flex-fill",3,"click"],[1,"bi","bi-pencil-fill"],[1,"ms-2"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"bi","bi-clipboard-plus"],[1,"flex-shrink-1","ms-2"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"]],template:function(i,s){1&i&&(e.j41(0,"div")(1,"div",0)(2,"h5"),e.EFF(3,"Gear Presets"),e.k0s(),e.DNE(4,ge,3,0,"button",1),e.k0s(),e.DNE(5,_e,14,6,"ng-container",2),e.k0s()),2&i&&(e.R7$(4),e.Y8G("ngIf",s.gearPresets.length<s.maxGearPresets),e.R7$(),e.Y8G("ngForOf",s.gearPresets))},dependencies:[p.YU,p.Sq,p.bT,k],encapsulation:2})}}return n})();var g=function(n){return n[n.Cummulativettk=0]="Cummulativettk",n[n.TtkHistogram=1]="TtkHistogram",n}(g||{});const T=[{graphType:g.Cummulativettk,label:"Cummulative TTK"},{graphType:g.TtkHistogram,label:"TTK Histogram"}];var G=o(4378),_=o(973);let he=(()=>{class n{constructor(t){this.tickToTimePipe=t,this.chartColors=["blue","green","red","orange","purple","pink","brown","yellow","teal"]}ngOnChanges(t){t.simpleSimResults&&this.updateCumTtkChart()}updateCumTtkChart(){this.cumTtkChart&&this.cumTtkChart.destroy(),this.cumTtkChart=new G.t1("cumTtkChart",{type:"line",data:{datasets:[]}});const t=this.simpleSimResults.map((l,r)=>({label:"Setup "+(r+1),data:l.cummulativeTtk,backgroundColor:this.chartColors[r%this.chartColors.length]})),i=this.simpleSimResults.reduce((l,r)=>r.cummulativeTtk.length>l?r.cummulativeTtk.length:l,0),s=Array(i);for(let l=0;l<i;l++)s[l]=this.tickToTimePipe.transform(l);this.cumTtkChart.data={labels:s,datasets:t},this.cumTtkChart.options={scales:{y:{title:{display:!0,text:"Cummulative Probability"}},x:{title:{display:!0,text:"Time to Kill"}}},plugins:{tooltip:{callbacks:{title:l=>"TTK: "+l[0].label}}}},this.cumTtkChart.update()}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(_.A))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-cummulative-ttk-graph"]],inputs:{simpleSimResults:"simpleSimResults"},features:[e.OA$],decls:3,vars:1,consts:[[1,"chart-container"],["id","cumTtkChart"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"canvas",1),e.EFF(2),e.k0s()()),2&i&&(e.R7$(2),e.JRh(s.cumTtkChart))},encapsulation:2})}}return n})(),be=(()=>{class n{constructor(t){this.tickToTimePipe=t,this.chartColors=["blue","green","red","orange","purple","pink","brown","yellow","teal"]}ngOnChanges(t){t.simpleSimResults&&this.updatettkHistogramChart()}updatettkHistogramChart(){this.ttkHistogramChart&&this.ttkHistogramChart.destroy(),this.ttkHistogramChart=new G.t1("ttkHistogramChart",{type:"bar",data:{datasets:[]}});const t=this.simpleSimResults.map((l,r)=>({label:"Setup "+(r+1),data:l.ttkHistogram,backgroundColor:this.chartColors[r%this.chartColors.length],barThickness:3})),i=this.simpleSimResults.reduce((l,r)=>r.ttkHistogram.length>l?r.ttkHistogram.length:l,0),s=Array(i);for(let l=0;l<i;l++)s[l]=this.tickToTimePipe.transform(l);this.ttkHistogramChart.data={labels:s,datasets:t},this.ttkHistogramChart.options={scales:{y:{title:{display:!0,text:"Samples"}},x:{offset:!0,title:{display:!0,text:"Time to Kill"}}},plugins:{tooltip:{callbacks:{title:l=>"TTK: "+l[0].label}}}},this.ttkHistogramChart.update()}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(_.A))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-ttk-histogram-graph"]],inputs:{simpleSimResults:"simpleSimResults"},features:[e.OA$],decls:3,vars:1,consts:[[1,"chart-container"],["id","ttkHistogramChart"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"canvas",1),e.EFF(2),e.k0s()()),2&i&&(e.R7$(2),e.JRh(s.ttkHistogramChart))},encapsulation:2})}}return n})();const fe=n=>({active:n});function ve(n,a){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"li",4)(2,"a",5),e.bIt("click",function(){const s=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.activeTab=s)}),e.j41(3,"div",6),e.EFF(4),e.k0s()()(),e.bVm()}if(2&n){const t=a.$implicit,i=e.XpG();e.R7$(2),e.Y8G("ngClass",e.eq3(2,fe,i.activeTab.graphType===t.graphType)),e.R7$(2),e.JRh(t.label)}}function Ce(n,a){if(1&n&&(e.j41(0,"div"),e.nrm(1,"app-cummulative-ttk-graph",7),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("simpleSimResults",t.simpleSimResults)}}function ke(n,a){if(1&n&&(e.j41(0,"div"),e.nrm(1,"app-ttk-histogram-graph",7),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("simpleSimResults",t.simpleSimResults)}}let Te=(()=>{class n{constructor(){this.graphTabs=T,this.GraphType=g,this.activeTab=T[0]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-sim-graph-tabs"]],inputs:{simpleSimResults:"simpleSimResults",inputSetup:"inputSetup"},decls:7,vars:2,consts:[[1,"navbar","navbar-expand-sm","bg-light","mb-3","rounded"],[1,"container-fluid","px-2"],[1,"navbar-nav","nav-tabs","flex-wrap"],[4,"ngFor","ngForOf"],[1,"nav-item"],["role","button",1,"nav-link",3,"click","ngClass"],[1,"text-center"],[3,"simpleSimResults"]],template:function(i,s){1&i&&(e.j41(0,"div")(1,"nav",0)(2,"div",1)(3,"ul",2),e.DNE(4,ve,5,4,"ng-container",3),e.k0s()()(),e.DNE(5,Ce,2,1,"div")(6,ke,2,1),e.k0s()),2&i&&(e.R7$(4),e.Y8G("ngForOf",s.graphTabs),e.R7$(),e.vxM(5,s.activeTab.graphType===s.GraphType.Cummulativettk?5:s.activeTab.graphType===s.GraphType.TtkHistogram?6:-1))},dependencies:[p.YU,p.Sq,he,be],encapsulation:2})}}return n})();const Ge=(n,a)=>a.gearPresetIndex,x=n=>({gearSetup:n});function xe(n,a){if(1&n&&(e.j41(0,"div",4),e.nrm(1,"img",5),e.k0s()),2&n){const t=a.$implicit;e.R7$(),e.Mz_("src","assets/img/boosts/",t,".png",e.B4B),e.Y8G("title",t.replaceAll("_"," "))}}function Re(n,a){1&n&&e.eu8(0)}function Fe(n,a){if(1&n&&e.DNE(0,Re,1,0,"ng-container",6),2&n){e.XpG(2);const t=e.sdS(5);e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(2,x,a))}}function je(n,a){1&n&&e.eu8(0)}function Ie(n,a){if(1&n&&e.DNE(0,je,1,0,"ng-container",6),2&n){e.XpG(3);const t=e.sdS(5);e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(2,x,a))}}function ye(n,a){if(1&n&&e.DNE(0,Ie,1,4,"ng-container"),2&n){let t;const i=a.$implicit,s=e.XpG(2);e.vxM(0,(t=s.inputSetup.gearPresets[i.gearPresetIndex])?0:-1,t)}}function Ee(n,a){if(1&n&&(e.j41(0,"div",2),e.DNE(1,xe,2,3,"div",3),e.k0s(),e.j41(2,"div"),e.EFF(3,"-"),e.k0s(),e.DNE(4,Fe,1,4,"ng-container"),e.Z7z(5,ye,1,1,null,null,Ge)),2&n){let t;const i=a,s=e.XpG();e.R7$(),e.Y8G("ngForOf",i.gearSetupSettings.boosts),e.R7$(3),e.vxM(4,(t=s.inputSetup.gearPresets[i.mainGearSimSetup.gearPresetIndex])?4:-1,t),e.R7$(),e.Dyx(i.gearSimSetups)}}function $e(n,a){if(1&n&&(e.j41(0,"div",11),e.nrm(1,"img",12),e.k0s()),2&n){const t=a.$implicit;e.R7$(),e.Mz_("src","assets/img/prayer/",t,".png",e.B4B)}}function De(n,a){1&n&&(e.j41(0,"div",11),e.nrm(1,"img",13),e.k0s())}function Ne(n,a){if(1&n&&(e.j41(0,"div",7)(1,"div"),e.EFF(2),e.k0s(),e.j41(3,"div",8),e.DNE(4,$e,2,2,"div",9),e.k0s(),e.DNE(5,De,2,0,"div",10),e.k0s()),2&n){const t=a.gearSetup;e.R7$(2),e.JRh(t.setupName),e.R7$(2),e.Y8G("ngForOf",t.prayers),e.R7$(),e.Y8G("ngIf",t.isSpecial)}}let R=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-sim-input-setup-label"]],inputs:{inputSetup:"inputSetup",inputIndex:"inputIndex"},decls:6,vars:2,consts:[["gearSetupLabel",""],[1,"d-flex","align-items-center"],[1,"d-flex","mx-1"],["class","px-1",4,"ngFor","ngForOf"],[1,"px-1"],[3,"src","title"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-flex","align-items-center","px-1"],[1,"d-flex"],["class","px-0",4,"ngFor","ngForOf"],["class","px-0",4,"ngIf"],[1,"px-0"],[3,"src"],["src","assets/img/other/special_attack_orb.png"]],template:function(i,s){if(1&i&&(e.j41(0,"div",1)(1,"div"),e.EFF(2),e.k0s(),e.DNE(3,Ee,7,2),e.k0s(),e.DNE(4,Ne,6,3,"ng-template",null,0,e.C5r)),2&i){let l;e.R7$(2),e.SpI("Setup ",s.inputIndex+1,":"),e.R7$(),e.vxM(3,(l=null==s.inputSetup?null:s.inputSetup.inputGearSetups[s.inputIndex])?3:-1,l)}},dependencies:[p.Sq,p.bT,p.T3],encapsulation:2})}}return n})();var Pe=o(1421);const Ve=(n,a)=>a.tick,Ye=(n,a)=>({"maxhit-hitsplat":n,"miss-hitsplat":a});function Me(n,a){if(1&n&&(e.j41(0,"div",13)(1,"div"),e.nrm(2,"app-sim-input-setup-label",14),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("inputSetup",t.inputSetup)("inputIndex",t.selectedInputIndex)}}function Oe(n,a){if(1&n&&(e.j41(0,"div",13)(1,"div"),e.nrm(2,"app-sim-input-setup-label",14),e.k0s()()),2&n){const t=a.index,i=e.XpG();e.R7$(2),e.Y8G("inputSetup",i.inputSetup)("inputIndex",t)}}function Xe(n,a){1&n&&(e.EFF(0),e.nI1(1,"tickToTime")),2&n&&e.SpI(" ",e.bMT(1,1,a.item.ttk)," ")}function Be(n,a){1&n&&(e.j41(0,"div",15),e.EFF(1,"select setup"),e.k0s())}function we(n,a){if(1&n&&(e.j41(0,"tr",17)(1,"td",19),e.EFF(2),e.k0s(),e.j41(3,"td",19),e.EFF(4),e.nI1(5,"tickToTime"),e.k0s(),e.j41(6,"td"),e.nrm(7,"app-input-setup-label",20),e.k0s(),e.j41(8,"td")(9,"div",21),e.EFF(10),e.k0s()(),e.j41(11,"td"),e.nrm(12,"img",22),e.EFF(13),e.nrm(14,"img",23),e.EFF(15),e.k0s(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.EFF(19),e.nI1(20,"number"),e.k0s(),e.j41(21,"td"),e.EFF(22),e.nI1(23,"number"),e.k0s()()),2&n){const t=a.$implicit,i=e.XpG(2);e.R7$(2),e.JRh(t.tick),e.R7$(2),e.JRh(e.bMT(5,11,t.tick)),e.R7$(3),e.Y8G("gearSetupSettings",i.inputSetup.inputGearSetups[i.selectedInputIndex].gearSetupSettings)("gearSetup",i.inputSetup.gearPresets[t.presetIndex]),e.R7$(2),e.Y8G("ngClass",e.l_i(19,Ye,t.damage===t.maxHit,0===t.damage)),e.R7$(),e.SpI(" ",t.damage," "),e.R7$(3),e.SpI(" ",t.npcHp,"\xa0 "),e.R7$(2),e.SpI(" ",t.npcDef," "),e.R7$(2),e.JRh(t.maxHit),e.R7$(2),e.SpI("",e.i5U(20,13,100*t.accuracy,"1.2-2"),"%"),e.R7$(3),e.JRh(e.i5U(23,16,t.specialAttack/10,"1.2-2"))}}function Ae(n,a){if(1&n&&(e.j41(0,"table",16)(1,"thead")(2,"tr",17)(3,"th",18),e.EFF(4,"Tick"),e.k0s(),e.j41(5,"th",18),e.EFF(6,"Time"),e.k0s(),e.j41(7,"th",18),e.EFF(8,"Weapon"),e.k0s(),e.j41(9,"th",18),e.EFF(10,"Damage"),e.k0s(),e.j41(11,"th",18),e.EFF(12,"Npc"),e.k0s(),e.j41(13,"th",18),e.EFF(14,"Max hit"),e.k0s(),e.j41(15,"th",18),e.EFF(16,"Accuracy"),e.k0s(),e.j41(17,"th",18),e.EFF(18,"Spec"),e.k0s()()(),e.j41(19,"tbody"),e.Z7z(20,we,24,22,"tr",17,Ve),e.k0s()()),2&n){const t=e.XpG();e.R7$(20),e.Dyx(t.selectedDetailedRun.tickData)}}let Ue=(()=>{class n{constructor(t){this.inputSetupService=t}ngOnChanges(t){t.results&&this.results&&(this.inputSetup=(0,m.A)(this.inputSetupService.getInputSetup()),this.selectedResultChanged(this.results[0]))}selectedResultChanged(t){this.selectedResult=t,this.selectedDetailedRun=t.detailedRuns[0],this.selectedInputIndex=this.results.findIndex(i=>i===t)}selectedDetailedRunChange(t){this.selectedDetailedRun=t}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(u))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-detailed-run-results"]],inputs:{results:"results"},features:[e.OA$],decls:21,vars:11,consts:[["dropdownLabel",""],["dropdownOptions",""],["dropdownLabel","","dropdownOptions",""],["notSelectedDetailedRun",""],[1,"row","mb-2"],[1,"col-9","d-flex","align-items-center"],[1,"flex-grow-1",2,"min-width","0"],[3,"valueChanged","valueType","allValues","selectedValue","clearable","searchable"],[1,"col-3","d-flex","align-items-center"],[1,"me-2"],[1,"flex-grow-1"],[1,"table-sticky-header"],["class","table table-striped table-bordered border-dark mb-4",4,"ngIf"],[1,"d-flex","align-items-center"],[3,"inputSetup","inputIndex"],[1,"fst-italic","text-center"],[1,"table","table-striped","table-bordered","border-dark","mb-4"],[1,"text-end"],["scope","col",1,"text-start"],[1,"text-start"],[3,"gearSetupSettings","gearSetup"],[1,"hitsplat","damage-hitsplat","text-white","fw-light",3,"ngClass"],["src","assets/img/skills/hitpoints.png","title","Hitpoints"],["src","assets/img/skills/defence.png","title","Defence"]],template:function(i,s){if(1&i){const l=e.RV6();e.j41(0,"div")(1,"div",4)(2,"div",5)(3,"div",6)(4,"app-ng-select-lazy-load",7),e.bIt("valueChanged",function(h){return e.eBV(l),e.Njj(s.selectedResultChanged(h))}),e.DNE(5,Me,3,2,"ng-template",null,0,e.C5r)(7,Oe,3,2,"ng-template",null,1,e.C5r),e.k0s()()(),e.j41(9,"div",8)(10,"div",9),e.EFF(11,"Time"),e.k0s(),e.j41(12,"div",10)(13,"app-ng-select-lazy-load",7),e.bIt("valueChanged",function(h){return e.eBV(l),e.Njj(s.selectedDetailedRunChange(h))}),e.DNE(14,Xe,2,3,"ng-template",null,2,e.C5r),e.k0s(),e.DNE(17,Be,2,0,"ng-template",null,3,e.C5r),e.k0s()()(),e.j41(19,"div",11),e.DNE(20,Ae,22,0,"table",12),e.k0s()()}2&i&&(e.R7$(4),e.Y8G("valueType",s.SimpleSimResult)("allValues",s.results)("selectedValue",s.selectedResult)("clearable",!1)("searchable",!1),e.R7$(9),e.Y8G("valueType",s.DetailedRun)("allValues",s.selectedResult.detailedRuns)("selectedValue",s.selectedDetailedRun)("clearable",!1)("searchable",!1),e.R7$(7),e.Y8G("ngIf",s.selectedDetailedRun))},dependencies:[p.YU,p.bT,S.N,Pe.j,R,p.QX,_.A],styles:[".table-sticky-header[_ngcontent-%COMP%]{overflow:auto;height:550px}.table-sticky-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0}th[_ngcontent-%COMP%]{background:#c0a886}.hitsplat[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:center;background-size:auto 30px;height:30px;display:flex;align-items:center;justify-content:center}.damage-hitsplat[_ngcontent-%COMP%]{background-image:url(/assets/img/hitsplats/hit.png)}.maxhit-hitsplat[_ngcontent-%COMP%]{background-image:url(/assets/img/hitsplats/maxhit.png)}.miss-hitsplat[_ngcontent-%COMP%]{background-image:url(/assets/img/hitsplats/miss.png)}"]})}}return n})();const He=(n,a)=>a.averageTtk;function Le(n,a){if(1&n&&(e.j41(0,"h3",1),e.EFF(1,"Detailed Runs"),e.k0s(),e.nrm(2,"app-detailed-run-results",10)),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("results",t.results.results)}}function ze(n,a){if(1&n&&(e.j41(0,"tr",8)(1,"th",11),e.nrm(2,"app-sim-input-setup-label",12),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"tickToTime"),e.k0s(),e.j41(6,"td"),e.EFF(7),e.nI1(8,"tickToTime"),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"tickToTime"),e.k0s()()),2&n){const t=a.$implicit,i=a.$index,s=e.XpG(2);e.R7$(2),e.Y8G("inputSetup",s.inputSetup)("inputIndex",i),e.R7$(2),e.JRh(e.bMT(5,5,t.averageTtk)),e.R7$(3),e.JRh(e.bMT(8,7,t.maxTtk)),e.R7$(3),e.JRh(e.bMT(11,9,t.minTtk))}}function Je(n,a){if(1&n&&(e.qex(0),e.j41(1,"div"),e.DNE(2,Le,3,1),e.k0s(),e.j41(3,"div")(4,"h3",1),e.EFF(5,"Time Results"),e.k0s(),e.j41(6,"table",2)(7,"thead")(8,"tr",3)(9,"th",4)(10,"div",5)(11,"div",6),e.EFF(12,"Setup Name"),e.k0s()()(),e.j41(13,"th",7),e.EFF(14,"Average"),e.k0s(),e.j41(15,"th",7),e.EFF(16,"Max"),e.k0s(),e.j41(17,"th",7),e.EFF(18,"Min"),e.k0s()()(),e.j41(19,"tbody"),e.Z7z(20,ze,12,11,"tr",8,He),e.k0s()()(),e.j41(22,"div"),e.nrm(23,"app-sim-graph-tabs",9),e.k0s(),e.bVm()),2&n){const t=e.XpG();e.R7$(2),e.vxM(2,t.results.results[0].detailedRuns?2:-1),e.R7$(18),e.Dyx(t.results.results),e.R7$(3),e.Y8G("simpleSimResults",t.results.results)}}let We=(()=>{class n{constructor(t){this.inputSetupService=t}ngOnChanges(t){t.results&&this.results&&!this.results.error&&(this.inputSetup=(0,m.A)(this.inputSetupService.getInputSetup()))}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(u))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-simple-sim-results"]],inputs:{results:"results"},features:[e.OA$],decls:1,vars:1,consts:[[4,"ngIf"],[1,"mb-3","fw-light","text-center"],[1,"table","table-bordered","border-dark","mb-3"],[1,"text-end"],["scope","col",1,"text-start",2,"width","30%"],[1,"d-flex"],[1,"flex-fill"],["scope","col",2,"width","10%"],[1,"align-middle","text-end"],[3,"simpleSimResults"],[3,"results"],["scope","row",1,"text-start"],[3,"inputSetup","inputIndex"]],template:function(i,s){1&i&&e.DNE(0,Je,24,2,"ng-container",0),2&i&&e.Y8G("ngIf",(null==s.results?null:s.results.results)&&!(null!=s.results&&s.results.error))},dependencies:[p.bT,Te,R,Ue,_.A],encapsulation:2})}}return n})();var Ke=o(6697),Qe=o(2411);function Ze(n,a){1&n&&e.EFF(0),2&n&&e.SpI(" ",a.item.setupName," ")}function qe(n,a){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"app-ng-select-lazy-load",6),e.bIt("valueChanged",function(s){e.eBV(t);const l=e.XpG();return e.Njj(l.selectedSetupChange(s))}),e.DNE(2,Ze,1,1,"ng-template",null,1,e.C5r),e.k0s(),e.bVm()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("valueType",t.ExampleSetup)("allValues",t.exampleSetups)("selectedValue",t.selectedSetup)}}function et(n,a){1&n&&(e.j41(0,"div",7)(1,"span",8),e.EFF(2,"Loading..."),e.k0s()())}let tt=(()=>{class n{constructor(t,i){this.staticDataService=t,this.inputService=i}ngOnInit(){this.staticDataService.simpleSimExampleSetups$.pipe((0,Ke.s)(1)).subscribe(t=>{this.exampleSetups=t})}selectedSetupChange(t){if(!t)return;const i=this.inputService.getInputGearSetupFromJson(t.inputSetup);this.inputService.loadInputSetup(i)}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(Qe.a),e.rXU(u))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-example-sim-setups"]],decls:7,vars:2,consts:[["showSpinner",""],["dropdownLabel","","dropdownOptions",""],[1,"d-flex","align-items-center"],[1,"me-3"],[1,"flex-grow-1"],[4,"ngIf","ngIfElse"],["searchProperty","setupName","placeholder","Select example setup",3,"valueChanged","valueType","allValues","selectedValue"],["role","status",1,"spinner-border","ms-1"],[1,"visually-hidden"]],template:function(i,s){if(1&i&&(e.j41(0,"div",2)(1,"div",3),e.EFF(2,"Load example setup"),e.k0s(),e.j41(3,"div",4),e.DNE(4,qe,5,3,"ng-container",5)(5,et,3,0,"ng-template",null,0,e.C5r),e.k0s()()),2&i){const l=e.sdS(6);e.R7$(4),e.Y8G("ngIf",s.exampleSetups)("ngIfElse",l)}},dependencies:[p.bT,S.N],encapsulation:2})}}return n})();const F=n=>({active:n});function nt(n,a){if(1&n&&(e.qex(0),e.j41(1,"button",27),e.nrm(2,"span",28),e.j41(3,"span",29),e.EFF(4," Loading..."),e.k0s()(),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.loading)}}function it(n,a){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"button",30),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.runSimpleDmgSimCalc())}),e.j41(2,"span",29),e.EFF(3,"Run Damage Simulator"),e.k0s()(),e.bVm()}}function st(n,a){1&n&&(e.j41(0,"div"),e.EFF(1,"\xa0"),e.k0s())}function at(n,a){1&n&&(e.j41(0,"div",33),e.EFF(1," Damage sim done, results above! "),e.k0s())}function lt(n,a){if(1&n&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.JRh(t.simpleSimResults.error)}}function rt(n,a){if(1&n&&(e.qex(0),e.DNE(1,at,2,0,"div",31)(2,lt,2,1,"div",32),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.simpleSimResults&&!(null!=t.simpleSimResults&&t.simpleSimResults.error)),e.R7$(),e.Y8G("ngIf",null==t.simpleSimResults?null:t.simpleSimResults.error)}}function ot(n,a){if(1&n&&(e.qex(0),e.nrm(1,"app-gear-setup",36),e.bVm()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("gearSetup",t.selectedGearSetup)}}function pt(n,a){1&n&&e.EFF(0,"Select or add a new setup")}function ct(n,a){if(1&n&&(e.j41(0,"div"),e.DNE(1,ot,2,1,"ng-container",35)(2,pt,1,0,"ng-template",null,0,e.C5r),e.k0s()),2&n){const t=e.sdS(3),i=e.XpG();e.R7$(),e.Y8G("ngIf",i.selectedGearSetup)("ngIfElse",t)}}function ut(n,a){1&n&&(e.j41(0,"div"),e.nrm(1,"app-gear-setup-tabs"),e.k0s())}const mt=[{path:"",component:(()=>{class n{constructor(t,i){this.damageSimservice=t,this.inputService=i,this.loading=!1,this.simpleSimResults=null,this.activeTab="gear-setup-tabs",this.selectedGearSetup=null}runSimpleDmgSimCalc(){this.loading=!0,this.simpleSimResults=null;const t=this.inputService.getInputSetupAsJson();this.damageSimservice.runSimpleSim(t).subscribe({next:i=>{this.loading=!1,this.simpleSimResults=i},error:({error:{error:i}})=>{this.loading=!1;const s=i?i[0].toUpperCase()+i.slice(1):"Unkown error";this.simpleSimResults={...this.simpleSimResults,error:s}}})}onSelectGearSetup(t){this.selectedGearSetup=t,this.activeTab="preset-editor"}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(j.i),e.rXU(u))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-simple-dmg-sim"]],decls:41,vars:13,consts:[["emptySetup",""],[1,"container"],[1,"d-flex","align-items-center","justify-content-center","mb-4"],["src","assets/img/menu/dps-detail.png",1,"img-fluid",2,"width","70px"],[1,"ms-2"],[1,"display-1"],[1,"mb-2"],[3,"results"],[1,"row","mb-4"],[1,"d-flex","justify-content-between","mb-5","flex-wrap"],[1,"flex-fill","mb-1"],[1,"flex-grow-1"],[1,"flex-shrink-1","d-flex","ms-1"],[1,"mb-4"],[1,"d-flex","mb-1"],["role","group",1,"flex-fill","btn-group","btn-group-lg"],[4,"ngIf"],[1,"row"],[1,"col-3"],[3,"selectGearSetup"],[1,"col"],[1,"navbar","navbar-expand-sm","bg-light","mb-3","rounded"],[1,"container-fluid","px-2"],[1,"navbar-nav","nav-tabs","flex-wrap"],[1,"nav-item"],["role","button",1,"nav-link",3,"click","ngClass"],[1,"text-center"],["type","button",1,"btn","btn-primary",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"sr-only"],["type","button",1,"btn","btn-primary",3,"click"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-success"],[1,"text-danger"],[4,"ngIf","ngIfElse"],[3,"gearSetup"]],template:function(i,s){1&i&&(e.j41(0,"div",1)(1,"div",2)(2,"div"),e.nrm(3,"img",3),e.k0s(),e.j41(4,"div",4)(5,"h1",5),e.EFF(6,"Damage Sim (wip)"),e.k0s()()(),e.j41(7,"div",6),e.nrm(8,"app-simple-sim-results",7),e.k0s(),e.nrm(9,"hr",8),e.j41(10,"div",9)(11,"div",10),e.nrm(12,"app-example-sim-setups"),e.k0s(),e.nrm(13,"div",11)(14,"div",12),e.k0s(),e.nrm(15,"app-simple-sim-settings")(16,"app-shared-settings"),e.j41(17,"div",13)(18,"div",14)(19,"div",15),e.DNE(20,nt,5,1,"ng-container",16)(21,it,4,0,"ng-container",16),e.k0s()(),e.DNE(22,st,2,0,"div",16)(23,rt,3,2,"ng-container",16),e.k0s(),e.j41(24,"div",17)(25,"div",18)(26,"app-gear-presets",19),e.bIt("selectGearSetup",function(r){return s.onSelectGearSetup(r)}),e.k0s()(),e.j41(27,"div",20)(28,"nav",21)(29,"div",22)(30,"ul",23)(31,"li",24)(32,"a",25),e.bIt("click",function(){return s.activeTab="preset-editor"}),e.j41(33,"div",26),e.EFF(34,"Preset Editor"),e.k0s()()(),e.j41(35,"li",24)(36,"a",25),e.bIt("click",function(){return s.activeTab="gear-setup-tabs"}),e.j41(37,"div",26),e.EFF(38,"Gear Setups"),e.k0s()()()()()(),e.DNE(39,ct,4,2,"div",16)(40,ut,2,0,"div",16),e.k0s()()()),2&i&&(e.R7$(8),e.Y8G("results",s.simpleSimResults),e.R7$(12),e.Y8G("ngIf",s.loading),e.R7$(),e.Y8G("ngIf",!s.loading),e.R7$(),e.Y8G("ngIf",s.loading),e.R7$(),e.Y8G("ngIf",!s.loading),e.R7$(9),e.Y8G("ngClass",e.eq3(9,F,"preset-editor"===s.activeTab)),e.R7$(4),e.Y8G("ngClass",e.eq3(11,F,"gear-setup-tabs"===s.activeTab)),e.R7$(3),e.Y8G("ngIf","preset-editor"===s.activeTab),e.R7$(),e.Y8G("ngIf","gear-setup-tabs"===s.activeTab))},dependencies:[p.YU,p.bT,N.C,P.E,M,ue,Se,We,tt],encapsulation:2})}}return n})()}];let dt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[f.iI.forChild(mt),f.iI]})}}return n})();var gt=o(5241);let _t=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[p.MD,c.YN,dt,gt.T]})}}return n})()}}]);